{"pageProps":{"frontMatter":{"title":"Minikubeをlinuxで利用する | kubernetes","date":"2021.12.02","description":"Minikubeをlinuxで利用する | kubernetes","categories":["Kubernetes"]},"content":"<p>WindowsやMacではGUIにてDockerとKubernetesのセットアップができます。</p>\n<p>今回はLinuxではどうやんの？ってところで環境構築を実践していきます。</p>\n<p>今回はkali-linuxを使っていますがubuntuでも同じようにできると思います。</p>\n<p>VirtualBoxでいらない環境があったのでやってたらMiniKubeの利用でCPUが足りないと怒られた</p>\n<h2>Kubectlをインストール</h2>\n<p>このサイトを参考に進めるとkubectlコマンドが利用できるようになります。</p>\n<p>https://kubernetes.io/ja/docs/tasks/tools/install-kubectl/</p>\n<p><img src=\"/292/1.png\" alt=\"画像\"></p>\n<p>パスも通す素晴らしい例だと思います。</p>\n<h2>Dockerをインストール</h2>\n<p>そもそもDockerがなかったのでインストールします。</p>\n<div class=\"remark-highlight\"><pre class=\"language-unknown\"><code class=\"language-unknown\">docker ps\r\nCommand &#x26;#39;docker&#x26;#39; not found, but can be installed with:\r\nsudo apt install docker.io    \r\nsudo apt install podman-docker\r\n</code></pre></div>\n<p>必要なコマンドがわかったので” sudo apt install docker.io “でインストールします。</p>\n<div class=\"remark-highlight\"><pre class=\"language-unknown\"><code class=\"language-unknown\">sudo apt install docker.io\r\nパッケージリストを読み込んでいます... 完了\r\n依存関係ツリーを作成しています... 完了        \r\n状態情報を読み取っています... 完了        \r\n以下の追加パッケージがインストールされます:\r\n  cgroupfs-mount containerd criu libc-bin libc-dev-bin libc-l10n libc6 libc6-dev libc6-i386 libintl-perl libintl-xs-perl\r\n  libmodule-find-perl libmodule-scandeps-perl libnftables1 libproc-processtable-perl libsort-naturally-perl locales needrestart\r\n  nftables rpcsvc-proto runc tini\r\n</code></pre></div>\n<p>docker-composeもインストール</p>\n<div class=\"remark-highlight\"><pre class=\"language-unknown\"><code class=\"language-unknown\">sudo apt install docker-compose</code></pre></div>\n<h2>Minicubeのインストール</h2>\n<p>今どきMinicubeを使うのが正しい選択なのかわかりませんが、とりあえずlinuxで動かすためにインストールします。</p>\n<p>https://minikube.sigs.k8s.io/docs/start/</p>\n<p>CPU足りないと怒られるので増やしておきます</p>\n<p><img src=\"/292/2.png\" alt=\"画像\"></p>\n<p>スタート時に謎のエラー発生</p>\n<p><img src=\"/292/3.png\" alt=\"画像\"></p>\n<p>素晴らしいサイト</p>\n<p><a href=\"https://yukun.info/kubernetes-error-conntrack/\">参考</a></p>\n<p>気を取り直して実行（長いです）</p>\n<p>sudo minikube start –vm-driver=none</p>\n<p><img src=\"/292/4.png\" alt=\"画像\"></p>\n<p>minikubeが動くことを確認</p>\n<div class=\"remark-highlight\"><pre class=\"language-unknown\"><code class=\"language-unknown\">┌──(misaka㉿misaka)-[~]\r\r\n└─$ sudo minikube status\r\r\n[sudo] misaka のパスワード:\r\r\nminikube\r\r\ntype: Control Plane\r\r\nhost: Running\r\r\nkubelet: Running\r\r\napiserver: Running\r\r\nkubeconfig: Configured\r\r\n\r</code></pre></div>\n<h2>ダッシュボードを表示する</h2>\n<div class=\"remark-highlight\"><pre class=\"language-unknown\"><code class=\"language-unknown\">┌──(misaka㉿misaka)-[~]\r\r\n└─$ sudo minikube dashboard\r\r\n🔌  ダッシュボードを有効化しています...\r\r\n    ▪ イメージ kubernetesui/dashboard:v2.3.1 を使用しています\r\r\n    ▪ イメージ kubernetesui/metrics-scraper:v1.0.7 を使用しています\r\r\n🤔  ダッシュボードの状態を検証しています...\r\r\n🚀  プロキシを起動しています...\r\r\n🤔  プロキシーの状態を検証しています...\r\r\nhttp://127.0.0.1:43535/api/v1/namespaces/kubernetes-dashboard/services/http:kubernetes-dashboard:/proxy/\r\r\n\r</code></pre></div>\n<p><img src=\"/292/5.png\" alt=\"画像\"></p>\n<p>とりあえずここまでできれば環境構築もできた感じします。</p>","slug":"p292"},"__N_SSG":true}