{"pageProps":{"frontMatter":{"title":"カテゴリを取得するって一体何？|WordPress","date":"2021.12.07","description":"カテゴリを取得するって一体何？|WordPress","categories":["WordPress"]},"content":"<p>今回の話は茶でも飲みながら「やっぱりな」程度で読んでいただければと思います。</p>\n<p>前回まででタームを表示するなどまで勉強しました。</p>\n<p>しかしここまでで疑問が1つ生まれました。それはカテゴリ取得するって何？ってことです。</p>\n<p>カテゴリはワードプレスがデフォルトで用意しているタクソノミーですが、カテゴリーを取得するって一体何なのでしょうか？</p>\n<p>ワードプレス解説サイトなどで調べたところ、カテゴリー一覧を取得する方法はget_categoriesメソッドを利用するそうです。これでカテゴリというタクソノミーからターム一覧を取得するわけですね。</p>\n<p>では、じゃあ中身を見てみます。</p>\n<div class=\"remark-highlight\"><pre class=\"language-php\"><code class=\"language-php\"><span class=\"token keyword\">function</span> <span class=\"token function-definition function\">get_categories</span><span class=\"token punctuation\">(</span> <span class=\"token variable\">$args</span> <span class=\"token operator\">=</span> <span class=\"token string single-quoted-string\">''</span> <span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n\t<span class=\"token variable\">$defaults</span> <span class=\"token operator\">=</span> <span class=\"token keyword\">array</span><span class=\"token punctuation\">(</span> <span class=\"token string single-quoted-string\">'taxonomy'</span> <span class=\"token operator\">=></span> <span class=\"token string single-quoted-string\">'category'</span> <span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\t<span class=\"token variable\">$args</span>     <span class=\"token operator\">=</span> <span class=\"token function\">wp_parse_args</span><span class=\"token punctuation\">(</span> <span class=\"token variable\">$args</span><span class=\"token punctuation\">,</span> <span class=\"token variable\">$defaults</span> <span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\n\t<span class=\"token doc-comment comment\">/**\n\t * Filters the taxonomy used to retrieve terms when calling get_categories().\n\t *\n\t * <span class=\"token keyword\">@since</span> 2.7.0\n\t *\n\t * <span class=\"token keyword\">@param</span> <span class=\"token class-name\"><span class=\"token keyword\">string</span></span> <span class=\"token parameter\">$taxonomy</span> Taxonomy to retrieve terms from.\n\t * <span class=\"token keyword\">@param</span> <span class=\"token class-name\"><span class=\"token keyword\">array</span></span>  <span class=\"token parameter\">$args</span>     An array of arguments. See get_terms().\n\t */</span>\n\t<span class=\"token variable\">$args</span><span class=\"token punctuation\">[</span><span class=\"token string single-quoted-string\">'taxonomy'</span><span class=\"token punctuation\">]</span> <span class=\"token operator\">=</span> <span class=\"token function\">apply_filters</span><span class=\"token punctuation\">(</span> <span class=\"token string single-quoted-string\">'get_categories_taxonomy'</span><span class=\"token punctuation\">,</span> <span class=\"token variable\">$args</span><span class=\"token punctuation\">[</span><span class=\"token string single-quoted-string\">'taxonomy'</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">,</span> <span class=\"token variable\">$args</span> <span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n省略\n\n</code></pre></div>\n<p>前回見たように、ここでもタクソノミーを指定しています。今回の場合は”category”というのがハードコーディングされていますね。</p>\n<p>もう少しソースを見ていくと・・・</p>\n<div class=\"remark-highlight\"><pre class=\"language-php\"><code class=\"language-php\"><span class=\"token variable\">$categories</span> <span class=\"token operator\">=</span> <span class=\"token function\">get_terms</span><span class=\"token punctuation\">(</span> <span class=\"token variable\">$args</span> <span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n<span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span> <span class=\"token function\">is_wp_error</span><span class=\"token punctuation\">(</span> <span class=\"token variable\">$categories</span> <span class=\"token punctuation\">)</span> <span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n\t\t<span class=\"token variable\">$categories</span> <span class=\"token operator\">=</span> <span class=\"token keyword\">array</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\t<span class=\"token punctuation\">}</span> <span class=\"token keyword\">else</span> <span class=\"token punctuation\">{</span>\n\t\t<span class=\"token variable\">$categories</span> <span class=\"token operator\">=</span> <span class=\"token punctuation\">(</span><span class=\"token keyword type-casting\">array</span><span class=\"token punctuation\">)</span> <span class=\"token variable\">$categories</span><span class=\"token punctuation\">;</span>\n\t\t<span class=\"token keyword\">foreach</span> <span class=\"token punctuation\">(</span> <span class=\"token function\">array_keys</span><span class=\"token punctuation\">(</span> <span class=\"token variable\">$categories</span> <span class=\"token punctuation\">)</span> <span class=\"token keyword\">as</span> <span class=\"token variable\">$k</span> <span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n\t\t\t<span class=\"token function\">_make_cat_compat</span><span class=\"token punctuation\">(</span> <span class=\"token variable\">$categories</span><span class=\"token punctuation\">[</span> <span class=\"token variable\">$k</span> <span class=\"token punctuation\">]</span> <span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\t\t<span class=\"token punctuation\">}</span>\n\t<span class=\"token punctuation\">}</span>\n\n\t<span class=\"token keyword\">return</span> <span class=\"token variable\">$categories</span><span class=\"token punctuation\">;</span>\n</code></pre></div>\n<p>予想通りで申し訳ないですが、get_termsメソッドを呼び出していますね。</p>\n<p>カテゴリーというのはワードプレスがデフォルトで定義しているので、それ専用のメソッドとして準備しているだけでした。</p>","slug":"p456"},"__N_SSG":true}