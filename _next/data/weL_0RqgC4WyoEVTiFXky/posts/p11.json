{"pageProps":{"frontMatter":{"title":"WordPressのテーマtwentytwentyを改造する","date":"2021.09.29","description":"WordPressのテーマtwentytwentyを改造する","categories":["WordPress"]},"content":"<p>１からテーマを作るのが面倒くさいので既存「twentytwenty」というテーマを改造することにしました。</p>\n<p>このテーマはワードプレスインストール時にテーマフォルダに入っています。レスポンシブヘッダーメニューが標準であり、私の好きなシンプルなメインワンカラムデザインで、そもそも標準でナイスな感じのテーマです。</p>\n<p>ちなみにテーマはほぼ自作しかしたことがなく、他の人のテーマとか見たことが無かったので結構手探りです。</p>\n<h3>トップページなどは記事の抜粋とする</h3>\n<p>カテゴリー一覧とか、タグとか、とにかく記事ページ以外では抜粋で十分なので、修正しました。</p>\n<p>get_theme_modは設定値を拾ってくるらしいですが、使ったこともないし設定値がどこで設定してるのか不明だったので除去しました。</p>\n<div class=\"remark-highlight\"><pre class=\"language-php\"><code class=\"language-php\"><span class=\"token comment\">// ホーム画面でも全文出力されてしまうので、ホーム画面でも抜粋表示にする要修正</span>\n<span class=\"token comment\">//if ( is_search() || ! is_singular() &#x26;&#x26; 'summary' === get_theme_mod( 'blog_content', 'full' ) ) {</span>\n<span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span> <span class=\"token operator\">!</span><span class=\"token function\">is_singular</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n\t<span class=\"token function\">the_excerpt</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span> <span class=\"token keyword\">else</span> <span class=\"token punctuation\">{</span>\n\t<span class=\"token function\">the_content</span><span class=\"token punctuation\">(</span> <span class=\"token function\">__</span><span class=\"token punctuation\">(</span> <span class=\"token string single-quoted-string\">'Continue reading'</span><span class=\"token punctuation\">,</span> <span class=\"token string single-quoted-string\">'twentytwenty'</span> <span class=\"token punctuation\">)</span> <span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span>\n</code></pre></div>\n<h3>記事ページのカスタマイズをする</h3>\n<h4>コメントの有無の記載を除去する</h4>\n<p><img src=\"/11/1.png\" alt=\"画像\"></p>\n<p>記事ページの画面上部にある、タイトルとメタ情報を修正します。まず、コメントがあるかないかってどうでもいい情報は消したいと思います。（画像の赤線箇所です）ここのcommentsをコメントアウトします。</p>\n<div class=\"remark-highlight\"><pre class=\"language-php\"><code class=\"language-php\"><span class=\"token variable\">$post_meta</span> <span class=\"token operator\">=</span> <span class=\"token function\">apply_filters</span><span class=\"token punctuation\">(</span>\n\t\t\t<span class=\"token string single-quoted-string\">'twentytwenty_post_meta_location_single_top'</span><span class=\"token punctuation\">,</span>\n\t\t\t<span class=\"token keyword\">array</span><span class=\"token punctuation\">(</span>\n\t\t\t\t<span class=\"token string single-quoted-string\">'author'</span><span class=\"token punctuation\">,</span>\n\t\t\t\t<span class=\"token string single-quoted-string\">'post-date'</span><span class=\"token punctuation\">,</span>\n\t\t\t\t<span class=\"token comment\">//'comments',</span>\n\t\t\t\t<span class=\"token string single-quoted-string\">'sticky'</span><span class=\"token punctuation\">,</span>\n\t\t\t<span class=\"token punctuation\">)</span>\n\t\t<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n</code></pre></div>\n<h4>カテゴリを投稿者の左に表示する</h4>\n<p>先ほど、コメントを除去しましたが、今度はカテゴリを追加させます。同じ個所を以下のように修正します。</p>\n<div class=\"remark-highlight\"><pre class=\"language-php\"><code class=\"language-php\"><span class=\"token variable\">$post_meta</span> <span class=\"token operator\">=</span> <span class=\"token function\">apply_filters</span><span class=\"token punctuation\">(</span>\n\t\t\t<span class=\"token string single-quoted-string\">'twentytwenty_post_meta_location_single_top'</span><span class=\"token punctuation\">,</span>\n\t\t\t<span class=\"token keyword\">array</span><span class=\"token punctuation\">(</span>\n\t\t\t\t<span class=\"token string single-quoted-string\">'categories'</span><span class=\"token punctuation\">,</span>\n\t\t\t\t<span class=\"token string single-quoted-string\">'author'</span><span class=\"token punctuation\">,</span>\n\t\t\t\t<span class=\"token string single-quoted-string\">'post-date'</span><span class=\"token punctuation\">,</span>\n\t\t\t\t<span class=\"token comment\">//'comments',</span>\n\t\t\t\t<span class=\"token string single-quoted-string\">'sticky'</span><span class=\"token punctuation\">,</span>\n\t\t\t<span class=\"token punctuation\">)</span>\n\t\t<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n</code></pre></div>\n<p>これだけで表示されますが、一番右にカテゴリが表示されてしまいます。なので、以下のように修正します。</p>\n<p>まずは、カテゴリーの表示の記載を投稿者より前に移動する。</p>\n<div class=\"remark-highlight\"><pre class=\"language-php\"><code class=\"language-php\">// Categories.\n\t\t\t\tif ( in_array( 'categories', $post_meta, true ) &#x26;&#x26; has_category() ) {\n\n\t\t\t\t\t$has_meta = true;\n\t\t\t\t\t?>\n\t\t\t\t\t<span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&#x3C;</span>li</span> <span class=\"token attr-name\">class</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>post-categories meta-wrapper<span class=\"token punctuation\">\"</span></span><span class=\"token punctuation\">></span></span>\n\t\t\t\t\t\t<span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&#x3C;</span>span</span> <span class=\"token attr-name\">class</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>meta-icon<span class=\"token punctuation\">\"</span></span><span class=\"token punctuation\">></span></span>\n\t\t\t\t\t\t\t<span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&#x3C;</span>span</span> <span class=\"token attr-name\">class</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>screen-reader-text<span class=\"token punctuation\">\"</span></span><span class=\"token punctuation\">></span></span><span class=\"token php language-php\"><span class=\"token delimiter important\">&#x3C;?php</span> <span class=\"token function\">_e</span><span class=\"token punctuation\">(</span> <span class=\"token string single-quoted-string\">'Categories'</span><span class=\"token punctuation\">,</span> <span class=\"token string single-quoted-string\">'twentytwenty'</span> <span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span> <span class=\"token delimiter important\">?></span></span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&#x3C;/</span>span</span><span class=\"token punctuation\">></span></span>\n\t\t\t\t\t\t\t<span class=\"token php language-php\"><span class=\"token delimiter important\">&#x3C;?php</span> <span class=\"token function\">twentytwenty_the_theme_svg</span><span class=\"token punctuation\">(</span> <span class=\"token string single-quoted-string\">'folder'</span> <span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span> <span class=\"token delimiter important\">?></span></span>\n\t\t\t\t\t\t<span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&#x3C;/</span>span</span><span class=\"token punctuation\">></span></span>\n\t\t\t\t\t\t<span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&#x3C;</span>span</span> <span class=\"token attr-name\">class</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>meta-text<span class=\"token punctuation\">\"</span></span><span class=\"token punctuation\">></span></span>\n\t\t\t\t\t\t\t<span class=\"token php language-php\"><span class=\"token delimiter important\">&#x3C;?php</span> <span class=\"token function\">_ex</span><span class=\"token punctuation\">(</span> <span class=\"token string single-quoted-string\">'In'</span><span class=\"token punctuation\">,</span> <span class=\"token string single-quoted-string\">'A string that is output before one or more categories'</span><span class=\"token punctuation\">,</span> <span class=\"token string single-quoted-string\">'twentytwenty'</span> <span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span> <span class=\"token delimiter important\">?></span></span> <span class=\"token php language-php\"><span class=\"token delimiter important\">&#x3C;?php</span> <span class=\"token function\">the_category</span><span class=\"token punctuation\">(</span> <span class=\"token string single-quoted-string\">', '</span> <span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span> <span class=\"token delimiter important\">?></span></span>\n\t\t\t\t\t\t<span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&#x3C;/</span>span</span><span class=\"token punctuation\">></span></span>\n\t\t\t\t\t<span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&#x3C;/</span>li</span><span class=\"token punctuation\">></span></span>\n\t\t\t\t\t<span class=\"token php language-php\"><span class=\"token delimiter important\">&#x3C;?php</span>\n\n\t\t\t\t<span class=\"token punctuation\">}</span>\n\n\t\t\t\t<span class=\"token comment\">// Author.</span>\n\t\t\t\t<span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span> <span class=\"token function\">post_type_supports</span><span class=\"token punctuation\">(</span> <span class=\"token function\">get_post_type</span><span class=\"token punctuation\">(</span> <span class=\"token variable\">$post_id</span> <span class=\"token punctuation\">)</span><span class=\"token punctuation\">,</span> <span class=\"token string single-quoted-string\">'author'</span> <span class=\"token punctuation\">)</span> <span class=\"token operator\">&#x26;&#x26;</span> <span class=\"token function\">in_array</span><span class=\"token punctuation\">(</span> <span class=\"token string single-quoted-string\">'author'</span><span class=\"token punctuation\">,</span> <span class=\"token variable\">$post_meta</span><span class=\"token punctuation\">,</span> <span class=\"token constant boolean\">true</span> <span class=\"token punctuation\">)</span> <span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n\n\t\t\t\t\t<span class=\"token variable\">$has_meta</span> <span class=\"token operator\">=</span> <span class=\"token constant boolean\">true</span><span class=\"token punctuation\">;</span>\n\t\t\t\t\t<span class=\"token delimiter important\">?></span></span>\n\t\t\t\t\t<span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&#x3C;</span>li</span> <span class=\"token attr-name\">class</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>post-author meta-wrapper<span class=\"token punctuation\">\"</span></span><span class=\"token punctuation\">></span></span>\n\t\t\t\t\t\t<span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&#x3C;</span>span</span> <span class=\"token attr-name\">class</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>meta-icon<span class=\"token punctuation\">\"</span></span><span class=\"token punctuation\">></span></span>\n\t\t\t\t\t\t\t<span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&#x3C;</span>span</span> <span class=\"token attr-name\">class</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>screen-reader-text<span class=\"token punctuation\">\"</span></span><span class=\"token punctuation\">></span></span><span class=\"token php language-php\"><span class=\"token delimiter important\">&#x3C;?php</span> <span class=\"token function\">_e</span><span class=\"token punctuation\">(</span> <span class=\"token string single-quoted-string\">'Post author'</span><span class=\"token punctuation\">,</span> <span class=\"token string single-quoted-string\">'twentytwenty'</span> <span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span> <span class=\"token delimiter important\">?></span></span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&#x3C;/</span>span</span><span class=\"token punctuation\">></span></span>\n\t\t\t\t\t\t\t<span class=\"token php language-php\"><span class=\"token delimiter important\">&#x3C;?php</span> <span class=\"token function\">twentytwenty_the_theme_svg</span><span class=\"token punctuation\">(</span> <span class=\"token string single-quoted-string\">'user'</span> <span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span> <span class=\"token delimiter important\">?></span></span>\n\t\t\t\t\t\t<span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&#x3C;/</span>span</span><span class=\"token punctuation\">></span></span>\n\t\t\t\t\t\t<span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&#x3C;</span>span</span> <span class=\"token attr-name\">class</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>meta-text<span class=\"token punctuation\">\"</span></span><span class=\"token punctuation\">></span></span>\n\t\t\t\t\t\t\t<span class=\"token php language-php\"><span class=\"token delimiter important\">&#x3C;?php</span>\n\t\t\t\t\t\t\t<span class=\"token function\">printf</span><span class=\"token punctuation\">(</span>\n\t\t\t\t\t\t\t\t<span class=\"token comment\">/* translators: %s: Author name. */</span>\n\t\t\t\t\t\t\t\t<span class=\"token function\">__</span><span class=\"token punctuation\">(</span> <span class=\"token string single-quoted-string\">'By %s'</span><span class=\"token punctuation\">,</span> <span class=\"token string single-quoted-string\">'twentytwenty'</span> <span class=\"token punctuation\">)</span><span class=\"token punctuation\">,</span>\n\t\t\t\t\t\t\t\t<span class=\"token string single-quoted-string\">'&#x3C;a href=\"'</span> <span class=\"token operator\">.</span> <span class=\"token function\">esc_url</span><span class=\"token punctuation\">(</span> <span class=\"token function\">get_author_posts_url</span><span class=\"token punctuation\">(</span> <span class=\"token function\">get_the_author_meta</span><span class=\"token punctuation\">(</span> <span class=\"token string single-quoted-string\">'ID'</span> <span class=\"token punctuation\">)</span> <span class=\"token punctuation\">)</span> <span class=\"token punctuation\">)</span> <span class=\"token operator\">.</span> <span class=\"token string single-quoted-string\">'\">'</span> <span class=\"token operator\">.</span> <span class=\"token function\">esc_html</span><span class=\"token punctuation\">(</span> <span class=\"token function\">get_the_author_meta</span><span class=\"token punctuation\">(</span> <span class=\"token string single-quoted-string\">'display_name'</span> <span class=\"token punctuation\">)</span> <span class=\"token punctuation\">)</span> <span class=\"token operator\">.</span> <span class=\"token string single-quoted-string\">'&#x3C;/a>'</span>\n\t\t\t\t\t\t\t<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\t\t\t\t\t\t\t<span class=\"token delimiter important\">?></span></span>\n\t\t\t\t\t\t<span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&#x3C;/</span>span</span><span class=\"token punctuation\">></span></span>\n\t\t\t\t\t<span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&#x3C;/</span>li</span><span class=\"token punctuation\">></span></span>\n\t\t\t\t\t<span class=\"token php language-php\"><span class=\"token delimiter important\">&#x3C;?php</span>\n\n\t\t\t\t<span class=\"token punctuation\">}</span></span>\n</code></pre></div>\n<p>これは、最初に設定した配列である、$post_metaの要素を見てヘッダー上部に表示するメタ情報を設定しています。</p>\n<p>categoriesという要素を配列に追加しているので、表示されるし、コメントは消したので表示されないという仕組みです。</p>\n<p><img src=\"/11/2.png\" alt=\"画像\"></p>\n<p>このInという記載を消したい場合は以下のように、Inの箇所を消して修正してください。</p>\n<div class=\"remark-highlight\"><pre class=\"language-html\"><code class=\"language-html\">// Categories.\n\t\t\t\tif ( in_array( 'categories', $post_meta, true ) &#x26;&#x26; has_category() ) {\n\n\t\t\t\t\t$has_meta = true;\n\t\t\t\t\t?>\n\t\t\t\t\t<span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&#x3C;</span>li</span> <span class=\"token attr-name\">class</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>post-categories meta-wrapper<span class=\"token punctuation\">\"</span></span><span class=\"token punctuation\">></span></span>\n\t\t\t\t\t\t<span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&#x3C;</span>span</span> <span class=\"token attr-name\">class</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>meta-icon<span class=\"token punctuation\">\"</span></span><span class=\"token punctuation\">></span></span>\n\t\t\t\t\t\t\t<span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&#x3C;</span>span</span> <span class=\"token attr-name\">class</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>screen-reader-text<span class=\"token punctuation\">\"</span></span><span class=\"token punctuation\">></span></span><span class=\"token prolog\">&#x3C;?php _e( 'Categories', 'twentytwenty' ); ?></span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&#x3C;/</span>span</span><span class=\"token punctuation\">></span></span>\n\t\t\t\t\t\t\t<span class=\"token prolog\">&#x3C;?php twentytwenty_the_theme_svg( 'folder' ); ?></span>\n\t\t\t\t\t\t<span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&#x3C;/</span>span</span><span class=\"token punctuation\">></span></span>\n\t\t\t\t\t\t<span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&#x3C;</span>span</span> <span class=\"token attr-name\">class</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>meta-text<span class=\"token punctuation\">\"</span></span><span class=\"token punctuation\">></span></span>\n\t\t\t\t\t\t\t<span class=\"token prolog\">&#x3C;?php _ex( '', 'A string that is output before one or more categories', 'twentytwenty' ); ?></span> <span class=\"token prolog\">&#x3C;?php the_category( ', ' ); ?></span>\n\t\t\t\t\t\t<span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&#x3C;/</span>span</span><span class=\"token punctuation\">></span></span>\n\t\t\t\t\t<span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&#x3C;/</span>li</span><span class=\"token punctuation\">></span></span>\n\t\t\t\t\t&#x3C;?php\n\n\t\t\t\t}\n</code></pre></div>\n<h4>タグを表示する</h4>\n<p>同じようにタグ情報を表示させましょう。配列にtagsを追加します。</p>\n<div class=\"remark-highlight\"><pre class=\"language-php\"><code class=\"language-php\"><span class=\"token variable\">$post_meta</span> <span class=\"token operator\">=</span> <span class=\"token function\">apply_filters</span><span class=\"token punctuation\">(</span>\n\t\t\t<span class=\"token string single-quoted-string\">'twentytwenty_post_meta_location_single_top'</span><span class=\"token punctuation\">,</span>\n\t\t\t<span class=\"token keyword\">array</span><span class=\"token punctuation\">(</span>\n\t\t\t\t<span class=\"token string single-quoted-string\">'categories'</span><span class=\"token punctuation\">,</span>\n\t\t\t\t<span class=\"token string single-quoted-string\">'tags'</span><span class=\"token punctuation\">,</span>\n\t\t\t\t<span class=\"token string single-quoted-string\">'author'</span><span class=\"token punctuation\">,</span>\n\t\t\t\t<span class=\"token string single-quoted-string\">'post-date'</span><span class=\"token punctuation\">,</span>\n\t\t\t\t<span class=\"token comment\">//'comments',</span>\n\t\t\t\t<span class=\"token string single-quoted-string\">'sticky'</span><span class=\"token punctuation\">,</span>\n\t\t\t<span class=\"token punctuation\">)</span>\n\t\t<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n</code></pre></div>\n<p>もしタグの表示順番を変えたい場合は、カテゴリと同じよう記載順番を変更すればOKです。</p>\n<h3>記事下のメタ情報を修正する</h3>\n<p>記事下のメタ情報は普通はタグのみ出力していますが、ヘッダーのメタ情報と同じ概念で修正できます。</p>\n<p>以下はカテゴリをー追加した例です。</p>\n<div class=\"remark-highlight\"><pre class=\"language-php\"><code class=\"language-php\"><span class=\"token variable\">$post_meta</span> <span class=\"token operator\">=</span> <span class=\"token function\">apply_filters</span><span class=\"token punctuation\">(</span>\n\t\t\t<span class=\"token string single-quoted-string\">'twentytwenty_post_meta_location_single_bottom'</span><span class=\"token punctuation\">,</span>\n\t\t\t<span class=\"token keyword\">array</span><span class=\"token punctuation\">(</span>\n\t\t\t\t<span class=\"token string single-quoted-string\">'categories'</span><span class=\"token punctuation\">,</span>\n\t\t\t\t<span class=\"token string single-quoted-string\">'tags'</span><span class=\"token punctuation\">,</span>\n\t\t\t<span class=\"token punctuation\">)</span>\n\t\t<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\n</code></pre></div>\n<p><img src=\"/11/3.png\" alt=\"画像\"></p>\n<h4>Editを消す</h4>\n<p>このEditは管理画面へリンクになるので、できるだけ隠しておきたいので消しましょう。</p>\n<p>edit_post_link();を消してしまえばOKです。</p>\n<div class=\"remark-highlight\"><pre class=\"language-php\"><code class=\"language-php\"><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&#x3C;</span>div</span> <span class=\"token attr-name\">class</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>section-inner<span class=\"token punctuation\">\"</span></span><span class=\"token punctuation\">></span></span>\n\t\t<span class=\"token php language-php\"><span class=\"token delimiter important\">&#x3C;?php</span>\n\t\t<span class=\"token function\">wp_link_pages</span><span class=\"token punctuation\">(</span>\n\t\t\t<span class=\"token keyword\">array</span><span class=\"token punctuation\">(</span>\n\t\t\t\t<span class=\"token string single-quoted-string\">'before'</span>      <span class=\"token operator\">=></span> <span class=\"token string single-quoted-string\">'&#x3C;nav class=\"post-nav-links bg-light-background\" aria-label=\"'</span> <span class=\"token operator\">.</span> <span class=\"token function\">esc_attr__</span><span class=\"token punctuation\">(</span> <span class=\"token string single-quoted-string\">'Page'</span><span class=\"token punctuation\">,</span> <span class=\"token string single-quoted-string\">'twentytwenty'</span> <span class=\"token punctuation\">)</span> <span class=\"token operator\">.</span> <span class=\"token string single-quoted-string\">'\">&#x3C;span class=\"label\">'</span> <span class=\"token operator\">.</span> <span class=\"token function\">__</span><span class=\"token punctuation\">(</span> <span class=\"token string single-quoted-string\">'Pages:'</span><span class=\"token punctuation\">,</span> <span class=\"token string single-quoted-string\">'twentytwenty'</span> <span class=\"token punctuation\">)</span> <span class=\"token operator\">.</span> <span class=\"token string single-quoted-string\">'&#x3C;/span>'</span><span class=\"token punctuation\">,</span>\n\t\t\t\t<span class=\"token string single-quoted-string\">'after'</span>       <span class=\"token operator\">=></span> <span class=\"token string single-quoted-string\">'&#x3C;/nav>'</span><span class=\"token punctuation\">,</span>\n\t\t\t\t<span class=\"token string single-quoted-string\">'link_before'</span> <span class=\"token operator\">=></span> <span class=\"token string single-quoted-string\">'&#x3C;span class=\"page-number\">'</span><span class=\"token punctuation\">,</span>\n\t\t\t\t<span class=\"token string single-quoted-string\">'link_after'</span>  <span class=\"token operator\">=></span> <span class=\"token string single-quoted-string\">'&#x3C;/span>'</span><span class=\"token punctuation\">,</span>\n\t\t\t<span class=\"token punctuation\">)</span>\n\t\t<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\n\t\t<span class=\"token comment\">// 編集ボタンを本文中に表示する</span>\n\t\t<span class=\"token comment\">// edit_post_link();</span>\n\n\t\t<span class=\"token comment\">// Single bottom post meta.</span>\n\t\t<span class=\"token comment\">// タグ出ますここに</span>\n\t\t<span class=\"token function\">twentytwenty_the_post_meta</span><span class=\"token punctuation\">(</span> <span class=\"token function\">get_the_ID</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">,</span> <span class=\"token string single-quoted-string\">'single-bottom'</span> <span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\n\t\t<span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span> <span class=\"token function\">post_type_supports</span><span class=\"token punctuation\">(</span> <span class=\"token function\">get_post_type</span><span class=\"token punctuation\">(</span> <span class=\"token function\">get_the_ID</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">)</span><span class=\"token punctuation\">,</span> <span class=\"token string single-quoted-string\">'author'</span> <span class=\"token punctuation\">)</span> <span class=\"token operator\">&#x26;&#x26;</span> <span class=\"token function\">is_single</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n\n\t\t\t<span class=\"token function\">get_template_part</span><span class=\"token punctuation\">(</span> <span class=\"token string single-quoted-string\">'template-parts/entry-author-bio'</span> <span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\n\t\t<span class=\"token punctuation\">}</span>\n\t\t<span class=\"token delimiter important\">?></span></span>\n</code></pre></div>\n<h4>記事上部のカテゴリを消す</h4>\n<p>カテゴリはメタ情報として出力しているので、タイトル上のカテゴリは消しましょう。割と大きくコメントアウトします。</p>\n<div class=\"remark-highlight\"><pre class=\"language-php\"><code class=\"language-php\">/*\n\n\t\t$show_categories = apply_filters( 'twentytwenty_show_categories_in_entry_header', true );\n\n\t\t\n\t\tif ( true === $show_categories &#x26;&#x26; has_category() ) {\n\t\t\t?>\n\n\t\t\t<span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&#x3C;</span>div</span> <span class=\"token attr-name\">class</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>entry-categories<span class=\"token punctuation\">\"</span></span><span class=\"token punctuation\">></span></span>\n\t\t\t\t<span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&#x3C;</span>span</span> <span class=\"token attr-name\">class</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>screen-reader-text<span class=\"token punctuation\">\"</span></span><span class=\"token punctuation\">></span></span><span class=\"token php language-php\"><span class=\"token delimiter important\">&#x3C;?php</span> <span class=\"token function\">_e</span><span class=\"token punctuation\">(</span> <span class=\"token string single-quoted-string\">'Categories'</span><span class=\"token punctuation\">,</span> <span class=\"token string single-quoted-string\">'twentytwenty'</span> <span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span> <span class=\"token delimiter important\">?></span></span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&#x3C;/</span>span</span><span class=\"token punctuation\">></span></span>\n\t\t\t\t<span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&#x3C;</span>div</span> <span class=\"token attr-name\">class</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>entry-categories-inner<span class=\"token punctuation\">\"</span></span><span class=\"token punctuation\">></span></span>\n\t\t\t\t\t<span class=\"token php language-php\"><span class=\"token delimiter important\">&#x3C;?php</span> <span class=\"token comment\">// カテゴリーを表示する　</span><span class=\"token delimiter important\">?></span></span>\n\t\t\t\t\t<span class=\"token php language-php\"><span class=\"token delimiter important\">&#x3C;?php</span> <span class=\"token function\">the_category</span><span class=\"token punctuation\">(</span> <span class=\"token string single-quoted-string\">' '</span> <span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span> <span class=\"token delimiter important\">?></span></span>\n\t\t\t\t<span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&#x3C;/</span>div</span><span class=\"token punctuation\">></span></span><span class=\"token comment\">&#x3C;!-- .entry-categories-inner --></span>\n\t\t\t<span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&#x3C;/</span>div</span><span class=\"token punctuation\">></span></span><span class=\"token comment\">&#x3C;!-- .entry-categories --></span>\n\n\t\t\t<span class=\"token php language-php\"><span class=\"token delimiter important\">&#x3C;?php</span>\n\t\t<span class=\"token punctuation\">}</span>\n\t\t<span class=\"token operator\">*</span><span class=\"token operator\">/</span>\n\n\t\t<span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span> <span class=\"token function\">is_singular</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n\t\t\t<span class=\"token function\">the_title</span><span class=\"token punctuation\">(</span> <span class=\"token string single-quoted-string\">'&#x3C;h1 class=\"entry-title\">'</span><span class=\"token punctuation\">,</span> <span class=\"token string single-quoted-string\">'&#x3C;/h1>'</span> <span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\t\t<span class=\"token punctuation\">}</span> <span class=\"token keyword\">else</span> <span class=\"token punctuation\">{</span>\n\t\t\t<span class=\"token function\">the_title</span><span class=\"token punctuation\">(</span> <span class=\"token string single-quoted-string\">'&#x3C;h2 class=\"entry-title heading-size-1\">&#x3C;a href=\"'</span> <span class=\"token operator\">.</span> <span class=\"token function\">esc_url</span><span class=\"token punctuation\">(</span> <span class=\"token function\">get_permalink</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">)</span> <span class=\"token operator\">.</span> <span class=\"token string single-quoted-string\">'\">'</span><span class=\"token punctuation\">,</span> <span class=\"token string single-quoted-string\">'&#x3C;/a>&#x3C;/h2>'</span> <span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\t\t<span class=\"token punctuation\">}</span></span>\n</code></pre></div>\n<h3>投稿一覧から記事下に出力しているメタ情報を非表示にする</h3>\n<p>ちょっと意味がわからないと思いますので、画像の赤枠の箇所を消します。</p>\n<p><img src=\"/11/4.png\" alt=\"画像\"></p>\n<p>通常はタグだけ出しているのですが、タグごと記事の上に出しています。記事ページ以外ではここは出力する必要ないので消します。</p>\n<div class=\"remark-highlight\"><pre class=\"language-php\"><code class=\"language-php\"><span class=\"token comment\">//追加</span>\n\t\t<span class=\"token keyword\">if</span><span class=\"token punctuation\">(</span> <span class=\"token function\">is_singular</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">)</span><span class=\"token punctuation\">{</span>\n\t\t\t<span class=\"token function\">twentytwenty_the_post_meta</span><span class=\"token punctuation\">(</span> <span class=\"token function\">get_the_ID</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">,</span> <span class=\"token string single-quoted-string\">'single-bottom'</span> <span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\t\t<span class=\"token punctuation\">}</span>\n\t\t<span class=\"token comment\">//　ここまで</span>\n\n\t\t<span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span> <span class=\"token function\">post_type_supports</span><span class=\"token punctuation\">(</span> <span class=\"token function\">get_post_type</span><span class=\"token punctuation\">(</span> <span class=\"token function\">get_the_ID</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">)</span><span class=\"token punctuation\">,</span> <span class=\"token string single-quoted-string\">'author'</span> <span class=\"token punctuation\">)</span> <span class=\"token operator\">&#x26;&#x26;</span> <span class=\"token function\">is_single</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n\n\t\t\t<span class=\"token function\">get_template_part</span><span class=\"token punctuation\">(</span> <span class=\"token string single-quoted-string\">'template-parts/entry-author-bio'</span> <span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\n\t\t<span class=\"token punctuation\">}</span>\n\t\t<span class=\"token delimiter important\">?></span>\n</code></pre></div>\n<h3>自分のウィジェットを投入する</h3>\n<p>ウィジェットはfunctions.phpにて定義をして、footer-menus.widget.phpで表示しています。</p>\n<div class=\"remark-highlight\"><pre class=\"language-php\"><code class=\"language-php\"><span class=\"token variable\">$has_sidebar_1</span> <span class=\"token operator\">=</span> <span class=\"token function\">is_active_sidebar</span><span class=\"token punctuation\">(</span> <span class=\"token string single-quoted-string\">'sidebar-1'</span> <span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n<span class=\"token variable\">$has_sidebar_2</span> <span class=\"token operator\">=</span> <span class=\"token function\">is_active_sidebar</span><span class=\"token punctuation\">(</span> <span class=\"token string single-quoted-string\">'sidebar-2'</span> <span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n</code></pre></div>\n<div class=\"remark-highlight\"><pre class=\"language-php\"><code class=\"language-php\"><span class=\"token php language-php\"><span class=\"token delimiter important\">&#x3C;?php</span> <span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span> <span class=\"token variable\">$has_sidebar_1</span> <span class=\"token operator\">||</span> <span class=\"token variable\">$has_sidebar_2</span> <span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span> <span class=\"token delimiter important\">?></span></span>\n</code></pre></div>\n<p>functionに定義があれば、これらはtrueとなります。そして、dynamic_sidebarで画面に出力をしています。</p>\n<div class=\"remark-highlight\"><pre class=\"language-php\"><code class=\"language-php\"><span class=\"token php language-php\"><span class=\"token delimiter important\">&#x3C;?php</span> <span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span> <span class=\"token variable\">$has_sidebar_1</span> <span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span> <span class=\"token delimiter important\">?></span></span>\n\n\t<span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&#x3C;</span>div</span> <span class=\"token attr-name\">class</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>footer-widgets column-one grid-item<span class=\"token punctuation\">\"</span></span><span class=\"token punctuation\">></span></span>\n\t\t<span class=\"token php language-php\"><span class=\"token delimiter important\">&#x3C;?php</span> <span class=\"token function\">dynamic_sidebar</span><span class=\"token punctuation\">(</span> <span class=\"token string single-quoted-string\">'sidebar-1'</span> <span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span> <span class=\"token delimiter important\">?></span></span>\n\t<span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&#x3C;/</span>div</span><span class=\"token punctuation\">></span></span>\n\n<span class=\"token php language-php\"><span class=\"token delimiter important\">&#x3C;?php</span> <span class=\"token punctuation\">}</span> <span class=\"token delimiter important\">?></span></span>\n</code></pre></div>\n<p>functions.phpのtwentytwenty_sidebar_registrationメソッドを参考にウィジェットを追加して、上記と同じような記載をすれば独自のウィジェットを追加できそうです。</p>\n<h3>修正箇所の確認方法</h3>\n<p>まずはindex.phpを起点に見ていきます。基本的にここに書かれていることが全てなのですが、パーツをかなり分けて読み込んでいるため、色々な定義が色々なファイルに散らばっています。</p>\n<p>ヘッダー関連なら、get_header()が呼ばれているので、header.phpを見ていきます。</p>\n<p>header.phpの下ほうに行くと、get_template_partというメソッドが呼ばれています。</p>\n<div class=\"remark-highlight\"><pre class=\"language-php\"><code class=\"language-php\"><span class=\"token php language-php\"><span class=\"token delimiter important\">&#x3C;?php</span>\n\t\t\t<span class=\"token comment\">// Output the search modal (if it is activated in the customizer).</span>\n\t\t\t<span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span> <span class=\"token constant boolean\">true</span> <span class=\"token operator\">===</span> <span class=\"token variable\">$enable_header_search</span> <span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n\t\t\t\t<span class=\"token function\">get_template_part</span><span class=\"token punctuation\">(</span> <span class=\"token string single-quoted-string\">'template-parts/modal-search'</span> <span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\t\t\t<span class=\"token punctuation\">}</span>\n\t\t\t<span class=\"token delimiter important\">?></span></span>\n\n\t\t<span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&#x3C;/</span>header</span><span class=\"token punctuation\">></span></span><span class=\"token comment\">&#x3C;!-- #site-header --></span>\n\n\t\t<span class=\"token php language-php\"><span class=\"token delimiter important\">&#x3C;?php</span>\n\t\t<span class=\"token comment\">// Output the menu modal.</span>\n\t\t<span class=\"token comment\">// 小画面の時のメニューを表示する</span>\n\t\t<span class=\"token function\">get_template_part</span><span class=\"token punctuation\">(</span> <span class=\"token string single-quoted-string\">'template-parts/modal-menu'</span> <span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n</span>\n</code></pre></div>\n<p>これは、template-partsフォルダのファイルを読み込んでいます。</p>\n<p>このような感じでファイルを読み込んでいくような感じです。</p>","slug":"p11"},"__N_SSG":true}