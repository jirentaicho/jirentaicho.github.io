{"pageProps":{"frontMatter":{"title":"C# | WPF | FrameをUriで変更するときにコンストラクタが呼ばれない","date":"2021.10.12","description":"C# | WPF | FrameをUriで変更するときにコンストラクタが呼ばれない","categories":["WPF"]},"content":"<h2>事象</h2>\n<p>xamlファイルのframeコントロールに対してPageを設定する際に、Uriを作成してframe.Sourceを設定することができる</p>\n<div class=\"remark-highlight\"><pre class=\"language-java\"><code class=\"language-java\">uri <span class=\"token operator\">=</span> <span class=\"token keyword\">new</span> <span class=\"token class-name\">Uri</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"/pages/MessagePage.xaml\"</span><span class=\"token punctuation\">,</span> <span class=\"token class-name\">UriKind<span class=\"token punctuation\">.</span>Relative</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n<span class=\"token class-name\"><span class=\"token namespace\">myFrame<span class=\"token punctuation\">.</span></span>Source</span> <span class=\"token operator\">=</span> uri<span class=\"token punctuation\">;</span>\n</code></pre></div>\n<p>こうしたときにMessagePage.csのコンストラクタが呼ばれる。</p>\n<p>が、しかし、呼ばれないときがある。</p>\n<p>それは既にMessagePage.xamlがframeのsourceに設定されているときだ。</p>\n<p>例えばコンボボックスの値に応じてframeの内容を変えたい時に、</p>\n<p>ＡのときはMessage、Ｂの時はWarningなどとしたい時に不具合が出る</p>\n<p>A→B→Aとframeの要素を変えたときは、csファイルのコンストラクタが毎回呼ばれる</p>\n<p>しかし、A→A→Aとframeの要素を変えたときは、最初の1回しかcsファイルのコンストラクタが呼ばれない。</p>\n<h2>回避策</h2>\n<p>frameのNavigateを使います。</p>\n<div class=\"remark-highlight\"><pre class=\"language-java\"><code class=\"language-java\"><span class=\"token class-name\"><span class=\"token namespace\">myFrame<span class=\"token punctuation\">.</span></span>Navigate</span><span class=\"token punctuation\">(</span><span class=\"token keyword\">new</span> <span class=\"token class-name\">MessagePage</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n</code></pre></div>\n<p>こうすると同じxamlを使ってても毎度csのコンストラクタが呼ばれます。</p>\n<p>他に回避策ありそう？ですが現状はこんな感じでした。</p>","slug":"p125"},"__N_SSG":true}