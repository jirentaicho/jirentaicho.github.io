{"pageProps":{"frontMatter":{"title":"ファイル検索コマンド","date":"2022.11.08","description":"基本的なファイル検索コマンドをメモ","categories":["Linux"]},"content":"<p>ファイル検索をコマンドラインから行う際のメモです</p>\n<h1>ファイル名を指定して検索</h1>\n<p>findコマンドを利用してファイル名からファイルを検索します。</p>\n<p>find / -name ファイル名</p>\n<div class=\"remark-highlight\"><pre class=\"language-sh\"><code class=\"language-sh\">sh-4.2$ <span class=\"token function\">find</span> / <span class=\"token parameter variable\">-name</span> listener.log\nfind: <span class=\"token string\">'/etc/pki/CA/private'</span><span class=\"token builtin class-name\">:</span> Permission denied\n/opt/oracle/diag/tnslsnr/ecf69755a585/listener/trace/listener.log\nsh-4.2$\n</code></pre></div>\n<p>権限回りで検索できないのがありますが、listener.logというファイルを検索できています。<br>\nちなみに/は全てのディレクトリを対象にしていますが、現在のディレクトリのみを対象にもできます</p>\n<div class=\"remark-highlight\"><pre class=\"language-sh\"><code class=\"language-sh\">sh-4.2$ <span class=\"token function\">find</span> ./ <span class=\"token parameter variable\">-name</span> listener.log\nsh-4.2$\n</code></pre></div>\n<p>*なども利用でき、以下では全てのファイル名を対象に検索します</p>\n<div class=\"remark-highlight\"><pre class=\"language-sh\"><code class=\"language-sh\">sh-4.2$ <span class=\"token function\">ls</span>\nlog.xml\nsh-4.2$ <span class=\"token function\">find</span> ./ <span class=\"token parameter variable\">-name</span> log.*\n./log.xml\nsh-4.2$\n</code></pre></div>\n<h1>特定の文字列を含むファイルを検索する</h1>\n<p>grepコマンドを利用して検索文字列が含まれているファイルを探します</p>\n<div class=\"remark-highlight\"><pre class=\"language-sh\"><code class=\"language-sh\">sh-4.2$ <span class=\"token function\">grep</span> <span class=\"token string\">\"XML\"</span> <span class=\"token parameter variable\">-rl</span> /opt/oracle/homes/OraDBHome21cXE/rdbms/log\n/opt/oracle/homes/OraDBHome21cXE/rdbms/log/qopatch_log.log\n</code></pre></div>\n<p>\"XML\"という文字列を含むファイルを/opt/oracle/homes/OraDBHome21cXE/rdbms/logというフォルダから検索する</p>\n<ul>\n<li>-r\n<ul>\n<li>指定したパス以下を再帰検索する</li>\n</ul>\n</li>\n<li>-l\n<ul>\n<li>出力結果をファイル名のみにする</li>\n</ul>\n</li>\n</ul>\n<p>上記の例ではファイル名のみを出力対象にしていますが、もしもつけないとどこでXMLという文字列が利用されているのかまだ出力されます</p>\n<p>もしも-lオプションをつけないと以下のようになります</p>\n<div class=\"remark-highlight\"><pre class=\"language-sh\"><code class=\"language-sh\">sh-4.2$ <span class=\"token function\">grep</span> <span class=\"token string\">\"XML\"</span> <span class=\"token parameter variable\">-r</span> /opt/oracle/homes/OraDBHome21cXE/rdbms/log\n/opt/oracle/homes/OraDBHome21cXE/rdbms/log/qopatch_log.log:Field Definitions <span class=\"token keyword\">for</span> table OPATCH_XML_INV\n/opt/oracle/homes/OraDBHome21cXE/rdbms/log/qopatch_log.log:    XML_INVENTORY                   CHAR <span class=\"token punctuation\">(</span><span class=\"token number\">100000000</span><span class=\"token punctuation\">)</span>\n/opt/oracle/homes/OraDBHome21cXE/rdbms/log/qopatch_log.log:Field Definitions <span class=\"token keyword\">for</span> table OPATCH_XML_INV\n/opt/oracle/homes/OraDBHome21cXE/rdbms/log/qopatch_log.log:    XML_INVENTORY                   CHAR <span class=\"token punctuation\">(</span><span class=\"token number\">100000000</span><span class=\"token punctuation\">)</span>\n/opt/oracle/homes/OraDBHome21cXE/rdbms/log/qopatch_log.log:Field Definitions <span class=\"token keyword\">for</span> table OPATCH_XML_INV\n/opt/oracle/homes/OraDBHome21cXE/rdbms/log/qopatch_log.log:    XML_INVENTORY                   CHAR <span class=\"token punctuation\">(</span><span class=\"token number\">100000000</span><span class=\"token punctuation\">)</span>\n/opt/oracle/homes/OraDBHome21cXE/rdbms/log/qopatch_log.log:Field Definitions <span class=\"token keyword\">for</span> table OPATCH_XML_INV\n/opt/oracle/homes/OraDBHome21cXE/rdbms/log/qopatch_log.log:    XML_INVENTORY                   CHAR <span class=\"token punctuation\">(</span><span class=\"token number\">100000000</span><span class=\"token punctuation\">)</span>\n/opt/oracle/homes/OraDBHome21cXE/rdbms/log/qopatch_log.log:Field Definitions <span class=\"token keyword\">for</span> table OPATCH_XML_INV\n/opt/oracle/homes/OraDBHome21cXE/rdbms/log/qopatch_log.log:    XML_INVENTORY                   CHAR <span class=\"token punctuation\">(</span><span class=\"token number\">100000000</span><span class=\"token punctuation\">)</span>\n/opt/oracle/homes/OraDBHome21cXE/rdbms/log/qopatch_log.log:Field Definitions <span class=\"token keyword\">for</span> table OPATCH_XML_INV\n/opt/oracle/homes/OraDBHome21cXE/rdbms/log/qopatch_log.log:    XML_INVENTORY                   CHAR <span class=\"token punctuation\">(</span><span class=\"token number\">100000000</span><span class=\"token punctuation\">)</span>\n</code></pre></div>\n<p>同一のファイルですが、XMLという文字列を持っているので何度も出力されています</p>\n<p>また-rオプションを付けない場合はファイル名を指定する必要がありますので以下はエラー</p>\n<div class=\"remark-highlight\"><pre class=\"language-sh\"><code class=\"language-sh\">sh-4.2$ <span class=\"token function\">grep</span> <span class=\"token string\">\"XML\"</span> <span class=\"token parameter variable\">-l</span> /opt/oracle/homes/OraDBHome21cXE/rdbms/log\ngrep: /opt/oracle/homes/OraDBHome21cXE/rdbms/log: Is a directory\n</code></pre></div>\n<p>ファイル名を指定してあげます</p>\n<div class=\"remark-highlight\"><pre class=\"language-sh\"><code class=\"language-sh\">sh-4.2$ <span class=\"token function\">grep</span> <span class=\"token string\">\"XML\"</span> /opt/oracle/homes/OraDBHome21cXE/rdbms/log/qopatch_log.log\nField Definitions <span class=\"token keyword\">for</span> table OPATCH_XML_INV\n    XML_INVENTORY                   CHAR <span class=\"token punctuation\">(</span><span class=\"token number\">100000000</span><span class=\"token punctuation\">)</span>\nField Definitions <span class=\"token keyword\">for</span> table OPATCH_XML_INV\n    XML_INVENTORY                   CHAR <span class=\"token punctuation\">(</span><span class=\"token number\">100000000</span><span class=\"token punctuation\">)</span>\nField Definitions <span class=\"token keyword\">for</span> table OPATCH_XML_INV\n    XML_INVENTORY                   CHAR <span class=\"token punctuation\">(</span><span class=\"token number\">100000000</span><span class=\"token punctuation\">)</span>\nField Definitions <span class=\"token keyword\">for</span> table OPATCH_XML_INV\n    XML_INVENTORY                   CHAR <span class=\"token punctuation\">(</span><span class=\"token number\">100000000</span><span class=\"token punctuation\">)</span>\nField Definitions <span class=\"token keyword\">for</span> table OPATCH_XML_INV\n    XML_INVENTORY                   CHAR <span class=\"token punctuation\">(</span><span class=\"token number\">100000000</span><span class=\"token punctuation\">)</span>\nField Definitions <span class=\"token keyword\">for</span> table OPATCH_XML_INV\n    XML_INVENTORY                   CHAR <span class=\"token punctuation\">(</span><span class=\"token number\">100000000</span><span class=\"token punctuation\">)</span>\n</code></pre></div>\n<p>権限の問題で表示に難ありですが、/var配下で\"ORA-03113\"を含むファイルを出力した例です</p>\n<div class=\"remark-highlight\"><pre class=\"language-sh\"><code class=\"language-sh\">sh-4.2$ <span class=\"token function\">grep</span> <span class=\"token parameter variable\">-rl</span> <span class=\"token string\">\"ORA-03113\"</span> /var\ngrep: /var/spool/mail/rpc: Permission denied\ngrep: /var/spool/cron: Permission denied\ngrep: /var/lib/yum/history/history-2022-09-21.sqlite: Permission denied\ngrep: /var/lib/yum/history/2022-09-21/1: Permission denied\ngrep: /var/lib/yum/history/2022-09-21/4: Permission denied\ngrep: /var/lib/yum/history/2022-09-21/5: Permission denied\ngrep: /var/lib/yum/history/2022-09-21/2: Permission denied\ngrep: /var/lib/yum/history/2022-09-21/3: Permission denied\ngrep: /var/lib/yum/history/history-2022-09-21.sqlite-journal: Permission denied\ngrep: /var/lib/systemd/random-seed: Permission denied\ngrep: /var/lib/rpcbind: Permission denied\ngrep: /var/lib/gssproxy/clients: Permission denied\ngrep: /var/lib/gssproxy/rcache: Permission denied\ngrep: /var/lib/machines: Permission denied\ngrep: /var/lib/nfs/statd: Permission denied\ngrep: /var/cache/ldconfig: Permission denied\ngrep: /var/log/yum.log: Permission denied\ngrep: /var/log/tallylog: Permission denied\ngrep: /var/log/btmp: Permission denied\ngrep: /var/log/oracle-database-preinstall-21c/results: Permission denied\ngrep: /var/log/oracle-database-preinstall-21c/backup/Oct-04-2022-02-44-45: Permission denied\n</code></pre></div>","slug":"a004"},"__N_SSG":true}