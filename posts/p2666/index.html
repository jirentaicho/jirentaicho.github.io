<!DOCTYPE html><html><head><meta charSet="utf-8"/><meta name="viewport" content="width=device-width"/><meta name="twitter:card" content="summary_large_image"/><meta name="twitter:site" content="@site"/><meta name="twitter:creator" content="@keisukesiratori"/><meta property="og:site_name" content="Edelstein"/><title>Linux | ユーザーとグループ</title><meta name="robots" content="index,follow"/><meta name="description" content="Linux | ユーザーとグループ"/><meta property="og:title" content="Linux | ユーザーとグループ"/><meta property="og:description" content="Linux | ユーザーとグループ"/><meta property="og:url" content="http:localhost:3000/posts/p2666"/><meta property="og:type" content="website"/><meta property="og:image" content="https://locahost:3000/undefined"/><meta property="og:image:alt" content="Linux | ユーザーとグループ"/><meta property="og:image:width" content="1200"/><meta property="og:image:height" content="700"/><meta name="next-head-count" content="17"/><link rel="preload" href="/_next/static/css/df6bb53438996960.css" as="style"/><link rel="stylesheet" href="/_next/static/css/df6bb53438996960.css" data-n-g=""/><noscript data-n-css=""></noscript><script defer="" nomodule="" src="/_next/static/chunks/polyfills-c67a75d1b6f99dc8.js"></script><script src="/_next/static/chunks/webpack-8fa1640cc84ba8fe.js" defer=""></script><script src="/_next/static/chunks/framework-7751730b10fa0f74.js" defer=""></script><script src="/_next/static/chunks/main-480c748fb908b436.js" defer=""></script><script src="/_next/static/chunks/pages/_app-5a840d570c522cf0.js" defer=""></script><script src="/_next/static/chunks/7-a9ae6bf2d6049209.js" defer=""></script><script src="/_next/static/chunks/pages/posts/%5Bslug%5D-31ed6b5e8c78747a.js" defer=""></script><script src="/_next/static/J_6bGXgj6-te2jiJiU_T5/_buildManifest.js" defer=""></script><script src="/_next/static/J_6bGXgj6-te2jiJiU_T5/_ssgManifest.js" defer=""></script></head><body><div id="__next"><div class="flex flex-col min-h-screen bg-zinc-800"><header class="sticky top-0 border-b border-zinc-400 z-10 bg-zinc-900 text-slate-400"><div class="max-w-4xl mx-auto flex justify-between items-center h-12"><a href="/">Home</a><a target="_blank" href="https://github.com/jirentaicho">Github</a><a target="_blank" href="https://zenn.dev/misaka">Zenn</a></div></header><main class="flex-1 max-w-4xl w-full mx-auto"><div class="prose prose-lg max-w-none text-emerald-400"><h1 class="mt-12">Linux | ユーザーとグループ</h1><span>2022.05.30</span><div class="space-x-2"><span><a class="text-emerald-300" href="/categories/Linux/">Linux</a></span></div></div></main><footer class="bg-zinc-900 text-slate-400"><div class="max-w-4xl w-full mx-auto h-24 flex items-center justify-center"><div>© volkruss.com / Edelstein</div></div></footer></div></div><script id="__NEXT_DATA__" type="application/json">{"props":{"pageProps":{"frontMatter":{"title":"Linux | ユーザーとグループ","date":"2022.05.30","description":"Linux | ユーザーとグループ","categories":["Linux"]},"content":"\u003cp\u003e久しぶりにUbuntuを触ったので少しLinuxのユーザーについて勉強しました。\u003c/p\u003e\n\u003cp\u003eLinuxのユーザーはグループに属することができます。\u003c/p\u003e\n\u003cul\u003e\n\u003cli\u003eグループは複数のユーザーに対して一括して権限を設定できる\n\u003cul\u003e\n\u003cli\u003eファイルやディレクトリに所有グループを設定できます\u003c/li\u003e\n\u003c/ul\u003e\n\u003c/li\u003e\n\u003cli\u003eグループは主グループと補助グループがある\u003c/li\u003e\n\u003cli\u003eユーザーは必ず主グループに所属する必要がある\u003c/li\u003e\n\u003c/ul\u003e\n\u003ch2\u003eidコマンド\u003c/h2\u003e\n\u003cul\u003e\n\u003cli\u003eユーザーの情報を見ることができます\u003c/li\u003e\n\u003c/ul\u003e\n\u003cdiv class=\"remark-highlight\"\u003e\u003cpre class=\"language-unknown\"\u003e\u003ccode class=\"language-unknown\"\u003emisaka@misaka:~$ id misaka\nuid=1000(misaka) gid=1000(misaka) groups=1000(misaka),4(adm),24(cdrom),27(sudo),30(dip),46(plugdev),120(lpadmin),132(lxd),133(sambashare)\nmisaka@misaka:~$ id kakine\nuid=1001(kakine) gid=1001(kakine) groups=1001(kakine)\nmisaka@misaka:~$ id postgres\nuid=127(postgres) gid=135(postgres) groups=135(postgres),113(ssl-cert)\nmisaka@misaka:~$ \u003c/code\u003e\u003c/pre\u003e\u003c/div\u003e\n\u003cul\u003e\n\u003cli\u003eid kakine\n\u003cul\u003e\n\u003cli\u003e手動で追加したユーザーなので最低限の情報が付与されている\u003c/li\u003e\n\u003cli\u003e()の文字はIDに紐づく名前\u003c/li\u003e\n\u003c/ul\u003e\n\u003c/li\u003e\n\u003c/ul\u003e\n\u003ch2\u003eアカウント設定ファイル\u003c/h2\u003e\n\u003cul\u003e\n\u003cli\u003e/etc/passwd\n\u003cul\u003e\n\u003cli\u003eユーザーの基本情報\u003c/li\u003e\n\u003c/ul\u003e\n\u003c/li\u003e\n\u003cli\u003e/etc/shadow\n\u003cul\u003e\n\u003cli\u003eハッシュ化されたパスワード情報\u003c/li\u003e\n\u003c/ul\u003e\n\u003c/li\u003e\n\u003cli\u003e/etc/group\n\u003cul\u003e\n\u003cli\u003eグループの基本情報\u003c/li\u003e\n\u003c/ul\u003e\n\u003c/li\u003e\n\u003c/ul\u003e\n\u003ch3\u003epasswd\u003c/h3\u003e\n\u003cdiv class=\"remark-highlight\"\u003e\u003cpre class=\"language-unknown\"\u003e\u003ccode class=\"language-unknown\"\u003emisaka@misaka:/etc$ sudo cat /etc/passwd\nroot:x:0:0:root:/root:/bin/bash\ndaemon:x:1:1:daemon:/usr/sbin:/usr/sbin/nologin\nbin:x:2:2:bin:/bin:/usr/sbin/nologin\nsys:x:3:3:sys:/dev:/usr/sbin/nologin\nsync:x:4:65534:sync:/bin:/bin/sync\ngames:x:5:60:games:/usr/games:/usr/sbin/nologin\nman:x:6:12:man:/var/cache/man:/usr/sbin/nologin\nlp:x:7:7:lp:/var/spool/lpd:/usr/sbin/nologin\nmail:x:8:8:mail:/var/mail:/usr/sbin/nologin\ngdm:x:125:130:Gnome Display Manager:/var/lib/gdm3:/bin/false\nsssd:x:126:131:SSSD system user,,,:/var/lib/sss:/usr/sbin/nologin\nmisaka:x:1000:1000:misaka,,,:/home/misaka:/bin/bash\nsystemd-coredump:x:999:999:systemd Core Dumper:/:/usr/sbin/nologin\npostgres:x:127:135:PostgreSQL administrator,,,:/var/lib/postgresql:/bin/bash\nkakine:x:1001:1001:kakine,,,:/home/kakine:/bin/bash\u003c/code\u003e\u003c/pre\u003e\u003c/div\u003e\n\u003cul\u003e\n\u003cli\u003e:区切りで情報が表示されています\n\u003cul\u003e\n\u003cli\u003eユーザー名\u003c/li\u003e\n\u003cli\u003eパスワードpasswdでは表示せずxが格納される\u003c/li\u003e\n\u003cli\u003eUIDユーザーに割り当てられているID\u003c/li\u003e\n\u003cli\u003eGID主グループのグループID\u003c/li\u003e\n\u003cli\u003eコメント\u003c/li\u003e\n\u003cli\u003eホームディレクトリ\u003c/li\u003e\n\u003cli\u003eログインシェル\n\u003cul\u003e\n\u003cli\u003epasswdでは表示せずxが格納される\u003c/li\u003e\n\u003cli\u003eユーザーに割り当てられているID\u003c/li\u003e\n\u003cli\u003e主グループのグループID\u003c/li\u003e\n\u003c/ul\u003e\n\u003c/li\u003e\n\u003c/ul\u003e\n\u003c/li\u003e\n\u003c/ul\u003e\n\u003ch3\u003eshadow\u003c/h3\u003e\n\u003cdiv class=\"remark-highlight\"\u003e\u003cpre class=\"language-unknown\"\u003e\u003ccode class=\"language-unknown\"\u003emisaka@misaka:/etc$ sudo cat /etc/shadow\nroot:!:19140:0:99999:7:::\ndaemon:*:18858:0:99999:7:::\nbin:*:18858:0:99999:7:::\nsys:*:18858:0:99999:7:::\nsync:*:18858:0:99999:7:::\ngames:*:18858:0:99999:7:::\nmisaka:$6$s4ImRIkKlVPcY6yk$gDwQahh3N8C47rRdXS9i9uN2FAGYVhlxvQFH0Juu1X1or7/Kw3qoe6hIVjUH63LNIspZqWOEj.k3LscB4Y.Fh.:19140:0:99999:7:::\nsystemd-coredump:!!:19140::::::\npostgres:$6$LZ3ZK2vw9Op7V/cJ$phRALVjQEOwJqPeZYr5qh3Prlgqg2bL3cwYmPT.yqmX9qWVE1LXKHOhUar4DRZEbNsl74S3TYemVQo/fDVeJP0:19141:0:99999:7:::\nkakine:$6$WlGDxsM3wpGQN.H0$DdDIGrbXimxe6SjuGRnUxBzqYc/RLEuhExEBVXMPu8pkWePgH8HkyhItUmSI55ZZDjVuKa1onqEWCVgrKMXQW.:19141:0:99999:7:::\nmisaka@misaka:/etc$ \u003c/code\u003e\u003c/pre\u003e\u003c/div\u003e\n\u003cul\u003e\n\u003cli\u003eユーザー\u003c/li\u003e\n\u003cli\u003eハッシュ化されたパスワード\u003c/li\u003e\n\u003cli\u003e最終変更日\n\u003cul\u003e\n\u003cli\u003e1969/12/31からの経過日数\u003c/li\u003e\n\u003c/ul\u003e\n\u003c/li\u003e\n\u003cli\u003e変更可能最短日数\n\u003cul\u003e\n\u003cli\u003e0はいつでも変更可能\u003c/li\u003e\n\u003c/ul\u003e\n\u003c/li\u003e\n\u003cli\u003eパスワード有効期限\u003c/li\u003e\n\u003cli\u003e警告日\u003c/li\u003e\n\u003cli\u003e使用不可になるまでの日数\n\u003cul\u003e\n\u003cli\u003eパスワードの有効期限が過ぎてから使用不可になるまでの日数\u003c/li\u003e\n\u003c/ul\u003e\n\u003c/li\u003e\n\u003cli\u003eアカウント有効期限\u003c/li\u003e\n\u003cli\u003e予備項目\u003c/li\u003e\n\u003c/ul\u003e\n\u003ch3\u003egroup\u003c/h3\u003e\n\u003cdiv class=\"remark-highlight\"\u003e\u003cpre class=\"language-unknown\"\u003e\u003ccode class=\"language-unknown\"\u003emisaka@misaka:/etc$ sudo cat /etc/group\nroot:x:0:\ndaemon:x:1:\nbin:x:2:\nsys:x:3:\nmisaka:x:1000:\nsambashare:x:133:misaka\nsystemd-coredump:x:999:\nvboxsf:x:134:\npostgres:x:135:\nkakine:x:1001:\u003c/code\u003e\u003c/pre\u003e\u003c/div\u003e\n\u003cul\u003e\n\u003cli\u003eグループ名\u003c/li\u003e\n\u003cli\u003eパスワード\u003c/li\u003e\n\u003cli\u003eGID\u003c/li\u003e\n\u003cli\u003e所属メンバー\n\u003cul\u003e\n\u003cli\u003e補助グループのユーザー\u003c/li\u003e\n\u003c/ul\u003e\n\u003c/li\u003e\n\u003c/ul\u003e\n\u003ch2\u003eユーザー追加時のデフォルト設定\u003c/h2\u003e\n\u003cp\u003e/etc/login.defsが設定ファイル\u003c/p\u003e\n\u003cdiv class=\"remark-highlight\"\u003e\u003cpre class=\"language-unknown\"\u003e\u003ccode class=\"language-unknown\"\u003emisaka@misaka:/etc$ sudo cat /etc/login.defs\n#\n# Password aging controls:\n#\n#\tPASS_MAX_DAYS\tMaximum number of days a password may be used.\n#\tPASS_MIN_DAYS\tMinimum number of days allowed between password changes.\n#\tPASS_WARN_AGE\tNumber of days warning given before a password expires.\n#\nPASS_MAX_DAYS\t99999\nPASS_MIN_DAYS\t0\nPASS_WARN_AGE\t7\n\n#\n# Min/max values for automatic uid selection in useradd\n#\nUID_MIN\t\t\t 1000\nUID_MAX\t\t\t60000\n# System accounts\n#SYS_UID_MIN\t\t  100\n#SYS_UID_MAX\t\t  999\u003c/code\u003e\u003c/pre\u003e\u003c/div\u003e\n\u003cul\u003e\n\u003cli\u003ePASS_MAX_DAYS\n\u003cul\u003e\n\u003cli\u003eパスワードの最大有効日数\u003c/li\u003e\n\u003c/ul\u003e\n\u003c/li\u003e\n\u003cli\u003eUID_MIN\n\u003cul\u003e\n\u003cli\u003eここで指定した値以上のUIDがユーザー作成時に付与される\u003c/li\u003e\n\u003c/ul\u003e\n\u003c/li\u003e\n\u003c/ul\u003e\n\u003ch2\u003eグループの追加\u003c/h2\u003e\n\u003cul\u003e\n\u003cli\u003egroupadd -g 2000 school\n\u003cul\u003e\n\u003cli\u003e-gでGIDを指定できる\u003c/li\u003e\n\u003c/ul\u003e\n\u003c/li\u003e\n\u003c/ul\u003e\n\u003cdiv class=\"remark-highlight\"\u003e\u003cpre class=\"language-unknown\"\u003e\u003ccode class=\"language-unknown\"\u003esudo groupadd -g 9999 school\u003c/code\u003e\u003c/pre\u003e\u003c/div\u003e\n\u003cul\u003e\n\u003cli\u003eGIDを9999で作成\u003c/li\u003e\n\u003cli\u003eschoolという名前のグループを作成\u003c/li\u003e\n\u003c/ul\u003e\n\u003ch2\u003eユーザーの追加\u003c/h2\u003e\n\u003cul\u003e\n\u003cli\u003euseradd -u 9998 -g 9999 mejaha\n\u003cul\u003e\n\u003cli\u003e-uでUIDを指定できる\u003c/li\u003e\n\u003cli\u003e-gでGIDを指定できる\u003c/li\u003e\n\u003c/ul\u003e\n\u003c/li\u003e\n\u003c/ul\u003e\n\u003cdiv class=\"remark-highlight\"\u003e\u003cpre class=\"language-unknown\"\u003e\u003ccode class=\"language-unknown\"\u003emisaka@misaka:~$ sudo groupadd -g 9999 school\nmisaka@misaka:~$ \nmisaka@misaka:~$ sudo useradd -u 9998 -g 9999 mejaha\nmisaka@misaka:~$ \nmisaka@misaka:~$ id mejaha\nuid=9998(mejaha) gid=9999(school) groups=9999(school)\u003c/code\u003e\u003c/pre\u003e\u003c/div\u003e\n\u003cul\u003e\n\u003cli\u003eGIDを指定したので指定したGIDに所属している\u003c/li\u003e\n\u003c/ul\u003e\n\u003ch3\u003eパスワードを確認する\u003c/h3\u003e\n\u003cp\u003e今作ったユーザーはパスワードを設定してないのでどうなっているのか確認します\u003c/p\u003e\n\u003cp\u003e\u003cimg src=\"/2666/1.png\" alt=\"画像\"\u003e\u003c/p\u003e\n\u003cp\u003e!になっていました。これがおそらくアカウントロック状態なのでしょうか。\u003c/p\u003e\n\u003cp\u003eパスワードを変更して再度確認してみます。\u003c/p\u003e\n\u003cdiv class=\"remark-highlight\"\u003e\u003cpre class=\"language-unknown\"\u003e\u003ccode class=\"language-unknown\"\u003emisaka@misaka:~$ sudo passwd mejaha\n新しいパスワード: \n新しいパスワードを再入力してください: \npasswd: パスワードは正しく更新されました\u003c/code\u003e\u003c/pre\u003e\u003c/div\u003e\n\u003cp\u003e\u003cimg src=\"/2666/2.png\" alt=\"画像\"\u003e\u003c/p\u003e\n\u003cp\u003eハッシュ化されたパスワードが設定されています\u003c/p\u003e\n\u003ch2\u003e参考\u003c/h2\u003e\n\u003cul\u003e\n\u003cli\u003e基礎からしっかり学ぶ Linux入門\u003c/li\u003e\n\u003c/ul\u003e","slug":"p2666"},"__N_SSG":true},"page":"/posts/[slug]","query":{"slug":"p2666"},"buildId":"J_6bGXgj6-te2jiJiU_T5","isFallback":false,"gsp":true,"scriptLoader":[]}</script></body></html>