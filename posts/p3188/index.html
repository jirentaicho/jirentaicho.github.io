<!DOCTYPE html><html><head><meta charSet="utf-8"/><meta name="viewport" content="width=device-width"/><meta name="twitter:card" content="summary_large_image"/><meta name="twitter:site" content="@site"/><meta name="twitter:creator" content="@keisukesiratori"/><meta property="og:site_name" content="Edelstein"/><title>Rust | 初心者がオリジナルコンソールアプリのブックマークマンを作成する</title><meta name="robots" content="index,follow"/><meta name="description" content="Rust | 初心者がオリジナルコンソールアプリのブックマークマンを作成する"/><meta property="og:title" content="Rust | 初心者がオリジナルコンソールアプリのブックマークマンを作成する"/><meta property="og:description" content="Rust | 初心者がオリジナルコンソールアプリのブックマークマンを作成する"/><meta property="og:url" content="http:localhost:3000/posts/p3188"/><meta property="og:type" content="website"/><meta property="og:image" content="https://locahost:3000/undefined"/><meta property="og:image:alt" content="Rust | 初心者がオリジナルコンソールアプリのブックマークマンを作成する"/><meta property="og:image:width" content="1200"/><meta property="og:image:height" content="700"/><meta name="next-head-count" content="17"/><link rel="preload" href="/_next/static/css/df6bb53438996960.css" as="style"/><link rel="stylesheet" href="/_next/static/css/df6bb53438996960.css" data-n-g=""/><noscript data-n-css=""></noscript><script defer="" nomodule="" src="/_next/static/chunks/polyfills-c67a75d1b6f99dc8.js"></script><script src="/_next/static/chunks/webpack-8fa1640cc84ba8fe.js" defer=""></script><script src="/_next/static/chunks/framework-7751730b10fa0f74.js" defer=""></script><script src="/_next/static/chunks/main-480c748fb908b436.js" defer=""></script><script src="/_next/static/chunks/pages/_app-5a840d570c522cf0.js" defer=""></script><script src="/_next/static/chunks/7-a9ae6bf2d6049209.js" defer=""></script><script src="/_next/static/chunks/pages/posts/%5Bslug%5D-31ed6b5e8c78747a.js" defer=""></script><script src="/_next/static/_k0KM30rhR250p_rOC5lF/_buildManifest.js" defer=""></script><script src="/_next/static/_k0KM30rhR250p_rOC5lF/_ssgManifest.js" defer=""></script></head><body><div id="__next"><div class="flex flex-col min-h-screen bg-zinc-800"><header class="sticky top-0 border-b border-zinc-400 z-10 bg-zinc-900 text-slate-400"><div class="max-w-4xl mx-auto flex justify-between items-center h-12"><a href="/">Home</a><a target="_blank" href="https://github.com/jirentaicho">Github</a><a target="_blank" href="https://zenn.dev/misaka">Zenn</a></div></header><main class="flex-1 max-w-4xl w-full mx-auto"><div class="prose prose-lg max-w-none text-emerald-400"><h1 class="mt-12">Rust | 初心者がオリジナルコンソールアプリのブックマークマンを作成する</h1><span>2022.08.01</span><div class="space-x-2"><span><a class="text-emerald-300" href="/categories/Rust/">Rust</a></span></div></div></main><footer class="bg-zinc-900 text-slate-400"><div class="max-w-4xl w-full mx-auto h-24 flex items-center justify-center"><div>© volkruss.com / Edelstein</div></div></footer></div></div><script id="__NEXT_DATA__" type="application/json">{"props":{"pageProps":{"frontMatter":{"title":"Rust | 初心者がオリジナルコンソールアプリのブックマークマンを作成する","date":"2022.08.01","description":"Rust | 初心者がオリジナルコンソールアプリのブックマークマンを作成する","categories":["Rust"]},"content":"\u003cp\u003eみなさん、ブックマークマンというアプリをご存じでしょうか？おそらく聞いたことない人がほとんどだと思います。ブックマークマンとは今からRsutで作るオリジナルコンソールアプリです。\u003c/p\u003e\n\u003cp\u003e私はRust初心者なのでご容赦ください。\u003c/p\u003e\n\u003ch2\u003e引数を受け取る\u003c/h2\u003e\n\u003cp\u003eプロジェクトを作成したらmain.rsを早速修正していきます\u003c/p\u003e\n\u003cdiv class=\"remark-highlight\"\u003e\u003cpre class=\"language-unknown\"\u003e\u003ccode class=\"language-unknown\"\u003ePS D:\\rust\u0026#x26;gt; cargo new bookmarkman\n     Created binary (application) `bookmarkman` package\u003c/code\u003e\u003c/pre\u003e\u003c/div\u003e\n\u003cp\u003e引数を受け取る必要があるので引数を受け取ってみます\u003c/p\u003e\n\u003cdiv class=\"remark-highlight\"\u003e\u003cpre class=\"language-rs\"\u003e\u003ccode class=\"language-rs\"\u003euse std::env;\nfn main() {\n    let args: Vec\u0026#x26;lt;String\u0026#x26;gt; = env::args().collect();\n    println!(\u0026#x26;quot;{}\u0026#x26;quot;, args[1]);\n}\u003c/code\u003e\u003c/pre\u003e\u003c/div\u003e\n\u003cdiv class=\"remark-highlight\"\u003e\u003cpre class=\"language-unknown\"\u003e\u003ccode class=\"language-unknown\"\u003ePS D:\\rust\\bookmarkman\u0026#x26;gt; cargo run myBookmark\n    Finished dev [unoptimized + debuginfo] target(s) in 0.00s\n     Running `target\\debug\\bookmarkman.exe myBookmark`\nmyBookmark\u003c/code\u003e\u003c/pre\u003e\u003c/div\u003e\n\u003cul\u003e\n\u003cli\u003estd::envモジュールを利用することでargs関数から引数を取得できます\u003c/li\u003e\n\u003c/ul\u003e\n\u003ch2\u003eHashMapを利用する\u003c/h2\u003e\n\u003cp\u003e引数の値をargというkeyに対して入れて表示します\u003c/p\u003e\n\u003cdiv class=\"remark-highlight\"\u003e\u003cpre class=\"language-rs\"\u003e\u003ccode class=\"language-rs\"\u003euse std::env;\nuse std::collections::HashMap;\nfn main() {\n    let args: Vec\u0026#x26;lt;String\u0026#x26;gt; = env::args().collect();\n    println!(\u0026#x26;quot;{}\u0026#x26;quot;, args[1]);\n\n    let mut map = HashMap::new();\n    map.insert(\u0026#x26;quot;arg\u0026#x26;quot;, \u0026#x26;amp;args[1]);\n    for(key,value) in ↦ {\n        println!(\u0026#x26;quot;{} : {}\u0026#x26;quot;, key, value);\n    }\n}\n\u003c/code\u003e\u003c/pre\u003e\u003c/div\u003e\n\u003cdiv class=\"remark-highlight\"\u003e\u003cpre class=\"language-unknown\"\u003e\u003ccode class=\"language-unknown\"\u003ePS D:\\rust\\bookmarkman\u0026#x26;gt; cargo run myBookmark\n   Compiling bookmarkman v0.1.0 (D:\\rust\\bookmarkman)\n    Finished dev [unoptimized + debuginfo] target(s) in 0.85s\n     Running `target\\debug\\bookmarkman.exe myBookmark`\nmyBookmark\narg : myBookmark\u003c/code\u003e\u003c/pre\u003e\u003c/div\u003e\n\u003cul\u003e\n\u003cli\u003emap.insert(“arg”, \u0026#x26;args[1]);\n\u003cul\u003e\n\u003cli\u003e配列のindex=1の参照を渡しています\u003c/li\u003e\n\u003c/ul\u003e\n\u003c/li\u003e\n\u003c/ul\u003e\n\u003ch2\u003e値を入力させる\u003c/h2\u003e\n\u003cp\u003e引数の値でなくて値を入力させます。具体的に言うと「名前を入力してください」のようなメッセージを表示して、ユーザーからの入力を待つようなプログラムです。\u003c/p\u003e\n\u003cp\u003eまた引数を受け取る必要がなくなるので、引数を受け取る処理の削除と、HashMapには入力された文字列を格納するようにします\u003c/p\u003e\n\u003cdiv class=\"remark-highlight\"\u003e\u003cpre class=\"language-rs\"\u003e\u003ccode class=\"language-rs\"\u003euse std::collections::HashMap;\nuse std::io;\n\nfn main() {\n\n    println!(\u0026#x26;quot;タイトルを入力してください\u0026#x26;quot;);\n\n    let mut input = String::new();\n    io::stdin().read_line(\u0026#x26;amp;mut input).expect(\u0026#x26;quot;Error : faild to read\u0026#x26;quot;);\n\n    println!(\u0026#x26;quot;{}\u0026#x26;quot;,input);\n\n    let mut map = HashMap::new();\n    map.insert(\u0026#x26;quot;arg\u0026#x26;quot;, \u0026#x26;amp;input);\n    for(key,value) in ↦ {\n        println!(\u0026#x26;quot;{} : {}\u0026#x26;quot;, key, value);\n    }\n}\u003c/code\u003e\u003c/pre\u003e\u003c/div\u003e\n\u003cdiv class=\"remark-highlight\"\u003e\u003cpre class=\"language-unknown\"\u003e\u003ccode class=\"language-unknown\"\u003ePS D:\\rust\\bookmarkman\u0026#x26;gt; cargo run myBookmark\n   Compiling bookmarkman v0.1.0 (D:\\rust\\bookmarkman)\n    Finished dev [unoptimized + debuginfo] target(s) in 0.68s\n     Running `target\\debug\\bookmarkman.exe myBookmark`\nタイトルを入力してください\nラブライブ！スーパースター！\nラブライブ！スーパースター！\n\narg : ラブライブ！スーパースター！\u003c/code\u003e\u003c/pre\u003e\u003c/div\u003e\n\u003cul\u003e\n\u003cli\u003eread_lineの戻り値はio::Resultなのでexpectを使って値を取り出しています\n\u003cul\u003e\n\u003cli\u003eexpectはエラーメッセージを付与できます\u003c/li\u003e\n\u003cli\u003e似た機能にunwrapがあります\u003c/li\u003e\n\u003cli\u003eio::stdin().read_line(\u0026#x26;mut input).unwrap();でもOK\u003c/li\u003e\n\u003c/ul\u003e\n\u003c/li\u003e\n\u003c/ul\u003e\n\u003ch2\u003eループ\u003c/h2\u003e\n\u003cp\u003e複数の値を受け取れるようにloop処理を作成します\u003c/p\u003e\n\u003cdiv class=\"remark-highlight\"\u003e\u003cpre class=\"language-rs\"\u003e\u003ccode class=\"language-rs\"\u003euse std::collections::HashMap;\nuse std::io;\n\nfn main() {\n\n    loop{\n        println!(\u0026#x26;quot;タイトルを入力してください\u0026#x26;quot;);\n\n        let mut input = String::new();\n        io::stdin().read_line(\u0026#x26;amp;mut input).unwrap();\n\n        println!(\u0026#x26;quot;{}\u0026#x26;quot;,input);\n\n        let mut map = HashMap::new();\n        map.insert(\u0026#x26;quot;arg\u0026#x26;quot;, \u0026#x26;amp;input);\n        for(key,value) in ↦ {\n            println!(\u0026#x26;quot;{} : {}\u0026#x26;quot;, key, value);\n        }\n    }\n}\u003c/code\u003e\u003c/pre\u003e\u003c/div\u003e\n\u003cdiv class=\"remark-highlight\"\u003e\u003cpre class=\"language-unknown\"\u003e\u003ccode class=\"language-unknown\"\u003ePS D:\\rust\\bookmarkman\u0026#x26;gt; cargo run myBookmark\n    Finished dev [unoptimized + debuginfo] target(s) in 0.00s\n     Running `target\\debug\\bookmarkman.exe myBookmark`\nタイトルを入力してください\nliella!\nliella!\n\narg : liella!\n\nタイトルを入力してください\nkanon\nkanon\n\narg : kanon\n\nタイトルを入力してください\u003c/code\u003e\u003c/pre\u003e\u003c/div\u003e\n\u003cp\u003eこれは終了条件がないので無限ループしますが、\u003c/p\u003e\n\u003ch2\u003eコマンドの定義\u003c/h2\u003e\n\u003cp\u003e「特定のキーを押したときはアプリケーションを終了する」などの分岐を行うために必要となるコマンドを定義します。何を使ってやるか考えたところEnumを使ってコマンドの種類を定義しておく方法にしました。\u003c/p\u003e\n\u003cp\u003eちょっと長くなりますが以下のように実装\u003c/p\u003e\n\u003cdiv class=\"remark-highlight\"\u003e\u003cpre class=\"language-rs\"\u003e\u003ccode class=\"language-rs\"\u003euse std::collections::HashMap;\nuse std::io;\n\nenum Command {\n    CONTINUE,\n    EXIT,  \n}\n\n//　数値が入ったOptionからCommandが入ったResultを返します。\nfn get_command(input : Option\u0026#x26;lt;i8\u0026#x26;gt;) -\u0026#x26;gt; Result\u0026#x26;lt;Command,String\u0026#x26;gt; {\n    match input {\n        Some(1) =\u0026#x26;gt; Ok(Command::CONTINUE),\n        Some(2) =\u0026#x26;gt; Ok(Command::EXIT),\n        Some(_) =\u0026#x26;gt; Err(\u0026#x26;quot;入力されたコマンドが存在しません\u0026#x26;quot;.to_string()),\n        None =\u0026#x26;gt; Err(\u0026#x26;quot;システム例外\u0026#x26;quot;.to_string()),\n    }\n}\n\nfn hoge() {\n\n}\n\nfn main() {\n\n    loop{\n\n        println!(\u0026#x26;quot;コマンドを入力してください\u0026#x26;quot;);\n        println!(\u0026#x26;quot;1 = ブックマークを登録する\u0026#x26;quot;);\n        println!(\u0026#x26;quot;2 = アプリケーションを終了する\u0026#x26;quot;);\n\n        // ユーザーからコマンド番号を受け取る\n        let mut input = String::new();\n        io::stdin().read_line(\u0026#x26;amp;mut input).unwrap();\n\n        // コマンド番号をOption\u0026#x26;lt;i8\u0026#x26;gt;に変換する\n        let command_num : Option\u0026#x26;lt;i8\u0026#x26;gt; = match input.trim().parse() {\n            Ok(num) =\u0026#x26;gt; Some(num),\n            Err(_) =\u0026#x26;gt; {\n                println!(\u0026#x26;quot;存在しないコマンドが入力されました\u0026#x26;quot;);\n                break\n            },\n        };\n\n        // 数値からResult\u0026#x26;lt;Command\u0026#x26;gt;というenumを取得する\n        let command_enum = get_command(command_num);\n\n        // Result\u0026#x26;lt;\u0026#x26;gt;なので中身(enum)をmatchにかける\n        match command_enum.unwrap() {\n            Command::CONTINUE =\u0026#x26;gt; hoge(),\n            Command::EXIT =\u0026#x26;gt; {\n                println!(\u0026#x26;quot;アプリケーションを終了します\u0026#x26;quot;);\n                break\n            }\n        }\n    \n        let mut map = HashMap::new();\n        map.insert(\u0026#x26;quot;arg\u0026#x26;quot;, \u0026#x26;amp;input);\n        for(key,value) in ↦ {\n            println!(\u0026#x26;quot;{} : {}\u0026#x26;quot;, key, value);\n        }\n    }\n}\n\u003c/code\u003e\u003c/pre\u003e\u003c/div\u003e\n\u003cdiv class=\"remark-highlight\"\u003e\u003cpre class=\"language-unknown\"\u003e\u003ccode class=\"language-unknown\"\u003ePS D:\\rust\\bookmarkman\u0026#x26;gt; cargo run \n   Compiling bookmarkman v0.1.0 (D:\\rust\\bookmarkman)\n    Finished dev [unoptimized + debuginfo] target(s) in 0.57s\n     Running `target\\debug\\bookmarkman.exe`\nコマンドを入力してください\n1 = ブックマークを登録する\n2 = アプリケーションを終了する\n1\narg : 1\n\nコマンドを入力してください\n1 = ブックマークを登録する\n2 = アプリケーションを終了する\n2\nアプリケーションを終了します\u003c/code\u003e\u003c/pre\u003e\u003c/div\u003e\n\u003cp\u003e入力された値に応じて処理を振り分けることに成功しました。またループを抜けることもできるようになりました。\u003c/p\u003e\n\u003ch2\u003eHashMapに登録する処理\u003c/h2\u003e\n\u003cp\u003eHashMapなので同じキーが使えないのでここは後で修正しますが、いったんはイメージとしてこんな感じで書きます\u003c/p\u003e\n\u003cdiv class=\"remark-highlight\"\u003e\u003cpre class=\"language-rs\"\u003e\u003ccode class=\"language-rs\"\u003euse std::collections::HashMap;\nuse std::io;\n\nenum Command {\n    CONTINUE,\n    EXIT,  \n}\n//　数値が入ったOptionからCommandが入ったResultを返します。\nfn get_command(input : Option\u0026#x26;lt;i8\u0026#x26;gt;) -\u0026#x26;gt; Result\u0026#x26;lt;Command,String\u0026#x26;gt; {\n    match input {\n        Some(1) =\u0026#x26;gt; Ok(Command::CONTINUE),\n        Some(2) =\u0026#x26;gt; Ok(Command::EXIT),\n        Some(_) =\u0026#x26;gt; Err(\u0026#x26;quot;入力されたコマンドが存在しません\u0026#x26;quot;.to_string()),\n        None =\u0026#x26;gt; Err(\u0026#x26;quot;システム例外\u0026#x26;quot;.to_string()),\n    }\n}\n\nfn register_bookmark(map : \u0026#x26;amp;mut HashMap\u0026#x26;lt;String,String\u0026#x26;gt;) {\n    // コマンドからブックマークのURLを受け取る\n    println!(\u0026#x26;quot;URLを入力してください\u0026#x26;quot;);\n    let mut url = String::new();\n    io::stdin().read_line(\u0026#x26;amp;mut url).unwrap();\n\n    // コマンドからブックマークのタイトルを受け取る\n    println!(\u0026#x26;quot;タイトルを入力してください\u0026#x26;quot;);\n    let mut title = String::new();\n    io::stdin().read_line(\u0026#x26;amp;mut title).unwrap();\n\n    // HashMapに受け取った値を登録する\n    map.insert(\u0026#x26;quot;URL\u0026#x26;quot;.to_string(), url);\n    map.insert(\u0026#x26;quot;TITLE\u0026#x26;quot;.to_string(), title);\n\n}\n\nfn main() {\n\n    // ブックマーク格納するHashMap\n    let mut map :HashMap\u0026#x26;lt;String,String\u0026#x26;gt; = HashMap::new();\n\n    loop{ \n        println!(\u0026#x26;quot;コマンドを入力してください\u0026#x26;quot;);\n        println!(\u0026#x26;quot;1 = ブックマークを登録する\u0026#x26;quot;);\n        println!(\u0026#x26;quot;2 = アプリケーションを終了する\u0026#x26;quot;);\n\n        // ユーザーからコマンド番号を受け取る\n        let mut input = String::new();\n        io::stdin().read_line(\u0026#x26;amp;mut input).unwrap();\n\n        // コマンド番号をOption\u0026#x26;lt;i8\u0026#x26;gt;に変換する\n        let command_num : Option\u0026#x26;lt;i8\u0026#x26;gt; = match input.trim().parse() {\n            Ok(num) =\u0026#x26;gt; Some(num),\n            Err(_) =\u0026#x26;gt; {\n                println!(\u0026#x26;quot;存在しないコマンドが入力されました\u0026#x26;quot;);\n                break\n            },\n        };\n\n        // 数値からResult\u0026#x26;lt;Command\u0026#x26;gt;というenumを取得する\n        let command_enum = get_command(command_num);\n\n        // Result\u0026#x26;lt;\u0026#x26;gt;なので中身(enum)をmatchにかける\n        match command_enum.unwrap() {\n            Command::CONTINUE =\u0026#x26;gt; register_bookmark(\u0026#x26;amp;mut map), \n            Command::EXIT =\u0026#x26;gt; {\n                println!(\u0026#x26;quot;アプリケーションを終了します\u0026#x26;quot;);\n                break\n            }\n        }\n    \n       // let mut map = HashMap::new();\n       /*\n        map.insert(\u0026#x26;quot;arg\u0026#x26;quot;, \u0026#x26;amp;input);\n        for(key,value) in ↦ {\n            println!(\u0026#x26;quot;{} : {}\u0026#x26;quot;, key, value);\n        }\n        */\n    }\n\n}\u003c/code\u003e\u003c/pre\u003e\u003c/div\u003e\n\u003cul\u003e\n\u003cli\u003eコマンドの1を入力した時にregister_bookmark関数が実行されます\n\u003cul\u003e\n\u003cli\u003eこの時引数に可変参照のHashMapを受け取るようにします\u003c/li\u003e\n\u003cli\u003e呼び出し側も\u0026#x26;mutとしてあげます\u003c/li\u003e\n\u003c/ul\u003e\n\u003c/li\u003e\n\u003c/ul\u003e\n\u003ch2\u003e構造体の作成\u003c/h2\u003e\n\u003cp\u003eHashMapでは同じキーを登録できないのでURLもタイトルも1つしか登録ができません。なのでブックマークという構造体を作成して、ベクタ(サイズ可変)にどんどん突っ込めるようにします。\u003c/p\u003e\n\u003cp\u003e削除個所をコメントアウトしているので、少し長くなっています\u003c/p\u003e\n\u003cdiv class=\"remark-highlight\"\u003e\u003cpre class=\"language-rs\"\u003e\u003ccode class=\"language-rs\"\u003euse std::collections::HashMap;\nuse std::io;\n\nenum Command {\n    CONTINUE,\n    EXIT,  \n}\n\n// ブックマークを表す構造体を定義する\nstruct Bookmark {\n    url : String,\n    title: String,\n}\n\n//　数値が入ったOptionからCommandが入ったResultを返します。\nfn get_command(input : Option\u0026#x26;lt;i8\u0026#x26;gt;) -\u0026#x26;gt; Result\u0026#x26;lt;Command,String\u0026#x26;gt; {\n    match input {\n        Some(1) =\u0026#x26;gt; Ok(Command::CONTINUE),\n        Some(2) =\u0026#x26;gt; Ok(Command::EXIT),\n        Some(_) =\u0026#x26;gt; Err(\u0026#x26;quot;入力されたコマンドが存在しません\u0026#x26;quot;.to_string()),\n        None =\u0026#x26;gt; Err(\u0026#x26;quot;システム例外\u0026#x26;quot;.to_string()),\n    }\n}\n\n/*\nfn register_bookmark(map : \u0026#x26;amp;mut HashMap\u0026#x26;lt;String,String\u0026#x26;gt;) {\n    // コマンドからブックマークのURLを受け取る\n    println!(\u0026#x26;quot;URLを入力してください\u0026#x26;quot;);\n    let mut url = String::new();\n    io::stdin().read_line(\u0026#x26;amp;mut url).unwrap();\n\n    // コマンドからブックマークのタイトルを受け取る\n    println!(\u0026#x26;quot;タイトルを入力してください\u0026#x26;quot;);\n    let mut title = String::new();\n    io::stdin().read_line(\u0026#x26;amp;mut title).unwrap();\n\n    // HashMapに受け取った値を登録する\n    map.insert(\u0026#x26;quot;URL\u0026#x26;quot;.to_string(), url);\n    map.insert(\u0026#x26;quot;TITLE\u0026#x26;quot;.to_string(), title);\n}\n*/\n\n\nfn register_bookmark(bookmarks : \u0026#x26;amp;mut Vec\u0026#x26;lt;Bookmark\u0026#x26;gt;) {\n    // コマンドからブックマークのURLを受け取る\n    println!(\u0026#x26;quot;URLを入力してください\u0026#x26;quot;);\n    let mut url = String::new();\n    io::stdin().read_line(\u0026#x26;amp;mut url).unwrap();\n\n    // コマンドからブックマークのタイトルを受け取る\n    println!(\u0026#x26;quot;タイトルを入力してください\u0026#x26;quot;);\n    let mut title = String::new();\n    io::stdin().read_line(\u0026#x26;amp;mut title).unwrap();\n\n    // ブックマークを作成する\n    let bookmark = Bookmark {\n        url,\n        title,\n    };\n\n    // HashMapに受け取った値を登録する(もちろん可変じゃないと登録はできません)\n    bookmarks.push(bookmark);\n}\n\n\nfn main() {\n\n    // ブックマーク格納するHashMap\n    //let mut map :HashMap\u0026#x26;lt;String,String\u0026#x26;gt; = HashMap::new();\n\n    // ブックマークを格納するVec\u0026#x26;lt;Bookmark\u0026#x26;gt;\n    let mut bookmarks : Vec\u0026#x26;lt;Bookmark\u0026#x26;gt; = Vec::new();\n\n    loop{ \n        println!(\u0026#x26;quot;コマンドを入力してください\u0026#x26;quot;);\n        println!(\u0026#x26;quot;1 = ブックマークを登録する\u0026#x26;quot;);\n        println!(\u0026#x26;quot;2 = アプリケーションを終了する\u0026#x26;quot;);\n\n        // ユーザーからコマンド番号を受け取る\n        let mut input = String::new();\n        io::stdin().read_line(\u0026#x26;amp;mut input).unwrap();\n\n        // コマンド番号をOption\u0026#x26;lt;i8\u0026#x26;gt;に変換する\n        let command_num : Option\u0026#x26;lt;i8\u0026#x26;gt; = match input.trim().parse() {\n            Ok(num) =\u0026#x26;gt; Some(num),\n            Err(_) =\u0026#x26;gt; {\n                println!(\u0026#x26;quot;存在しないコマンドが入力されました\u0026#x26;quot;);\n                break\n            },\n        };\n\n        // 数値からResult\u0026#x26;lt;Command\u0026#x26;gt;というenumを取得する\n        let command_enum = get_command(command_num);\n\n        // Result\u0026#x26;lt;\u0026#x26;gt;なので中身(enum)をmatchにかける\n        match command_enum.unwrap() {\n            // Vecに格納する関数に変更する\n            //Command::CONTINUE =\u0026#x26;gt; register_bookmark(\u0026#x26;amp;mut map), \n            Command::CONTINUE =\u0026#x26;gt; register_bookmark(\u0026#x26;amp;mut bookmarks), \n            Command::EXIT =\u0026#x26;gt; {\n                println!(\u0026#x26;quot;アプリケーションを終了します\u0026#x26;quot;);\n                break\n            }\n        }\n    \n       // let mut map = HashMap::new();\n       /*\n        map.insert(\u0026#x26;quot;arg\u0026#x26;quot;, \u0026#x26;amp;input);\n        for(key,value) in ↦ {\n            println!(\u0026#x26;quot;{} : {}\u0026#x26;quot;, key, value);\n        }\n        */\n    }\n}\n\u003c/code\u003e\u003c/pre\u003e\u003c/div\u003e\n\u003cul\u003e\n\u003cli\u003e考え方はHashMapと同じです\u003c/li\u003e\n\u003c/ul\u003e\n\u003ch2\u003e構造体をデバッグ出力する\u003c/h2\u003e\n\u003cp\u003e構造体をログに出力できるようにします。\u003c/p\u003e\n\u003cdiv class=\"remark-highlight\"\u003e\u003cpre class=\"language-rs\"\u003e\u003ccode class=\"language-rs\"\u003euse std::io;\n\nenum Command {\n    CONTINUE,\n    EXIT,  \n}\n\n// ブックマークを表す構造体を定義する\n// #[derive(Debug)]をつけると{:?}でログに出力できるようになります\n#[derive(Debug)]\nstruct Bookmark {\n    url : String,\n    title: String,\n}\n\n//　数値が入ったOptionからCommandが入ったResultを返します。\nfn get_command(input : Option\u0026#x26;lt;i8\u0026#x26;gt;) -\u0026#x26;gt; Result\u0026#x26;lt;Command,String\u0026#x26;gt; {\n    match input {\n        Some(1) =\u0026#x26;gt; Ok(Command::CONTINUE),\n        Some(2) =\u0026#x26;gt; Ok(Command::EXIT),\n        Some(_) =\u0026#x26;gt; Err(\u0026#x26;quot;入力されたコマンドが存在しません\u0026#x26;quot;.to_string()),\n        None =\u0026#x26;gt; Err(\u0026#x26;quot;システム例外\u0026#x26;quot;.to_string()),\n    }\n}\n\nfn register_bookmark(bookmarks : \u0026#x26;amp;mut Vec\u0026#x26;lt;Bookmark\u0026#x26;gt;) {\n    // コマンドからブックマークのURLを受け取る\n    println!(\u0026#x26;quot;URLを入力してください\u0026#x26;quot;);\n    let mut url = String::new();\n    io::stdin().read_line(\u0026#x26;amp;mut url).unwrap();\n\n    // コマンドからブックマークのタイトルを受け取る\n    println!(\u0026#x26;quot;タイトルを入力してください\u0026#x26;quot;);\n    let mut title = String::new();\n    io::stdin().read_line(\u0026#x26;amp;mut title).unwrap();\n\n    // ブックマークを作成する\n    let bookmark = Bookmark {\n        url,\n        title,\n    };\n\n    // HashMapに受け取った値を登録する(もちろん可変じゃないと登録はできません)\n    bookmarks.push(bookmark);\n}\n\n\nfn main() {\n\n    // ブックマークを格納するVec\u0026#x26;lt;Bookmark\u0026#x26;gt;\n    let mut bookmarks : Vec\u0026#x26;lt;Bookmark\u0026#x26;gt; = Vec::new();\n\n    loop{ \n        println!(\u0026#x26;quot;コマンドを入力してください\u0026#x26;quot;);\n        println!(\u0026#x26;quot;1 = ブックマークを登録する\u0026#x26;quot;);\n        println!(\u0026#x26;quot;2 = アプリケーションを終了する\u0026#x26;quot;);\n\n        // ユーザーからコマンド番号を受け取る\n        let mut input = String::new();\n        io::stdin().read_line(\u0026#x26;amp;mut input).unwrap();\n\n        // コマンド番号をOption\u0026#x26;lt;i8\u0026#x26;gt;に変換する\n        let command_num : Option\u0026#x26;lt;i8\u0026#x26;gt; = match input.trim().parse() {\n            Ok(num) =\u0026#x26;gt; Some(num),\n            Err(_) =\u0026#x26;gt; {\n                println!(\u0026#x26;quot;存在しないコマンドが入力されました\u0026#x26;quot;);\n                break\n            },\n        };\n\n        // 数値からResult\u0026#x26;lt;Command\u0026#x26;gt;というenumを取得する\n        let command_enum = get_command(command_num);\n\n        // Result\u0026#x26;lt;\u0026#x26;gt;なので中身(enum)をmatchにかける\n        match command_enum.unwrap() {\n            Command::CONTINUE =\u0026#x26;gt; register_bookmark(\u0026#x26;amp;mut bookmarks), \n            Command::EXIT =\u0026#x26;gt; {\n                println!(\u0026#x26;quot;アプリケーションを終了します\u0026#x26;quot;);\n                break\n            }\n        }\n\n    }\n\n    for bookmark in \u0026#x26;amp;bookmarks {\n        println!(\u0026#x26;quot;{:?}\u0026#x26;quot;, bookmark);\n    }\n\n}\u003c/code\u003e\u003c/pre\u003e\u003c/div\u003e\n\u003cdiv class=\"remark-highlight\"\u003e\u003cpre class=\"language-unknown\"\u003e\u003ccode class=\"language-unknown\"\u003eundefined\u003c/code\u003e\u003c/pre\u003e\u003c/div\u003e","slug":"p3188"},"__N_SSG":true},"page":"/posts/[slug]","query":{"slug":"p3188"},"buildId":"_k0KM30rhR250p_rOC5lF","isFallback":false,"gsp":true,"scriptLoader":[]}</script></body></html>