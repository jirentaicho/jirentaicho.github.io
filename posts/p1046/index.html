<!DOCTYPE html><html><head><meta charSet="utf-8"/><meta name="viewport" content="width=device-width"/><meta name="twitter:card" content="summary_large_image"/><meta name="twitter:site" content="@site"/><meta name="twitter:creator" content="@keisukesiratori"/><meta property="og:site_name" content="Edelstein"/><title>Gitコマンドの勉強記録</title><meta name="robots" content="index,follow"/><meta name="description" content="Gitコマンドの勉強記録"/><meta property="og:title" content="Gitコマンドの勉強記録"/><meta property="og:description" content="Gitコマンドの勉強記録"/><meta property="og:url" content="http:localhost:3000/posts/p1046"/><meta property="og:type" content="website"/><meta property="og:image" content="https://locahost:3000/undefined"/><meta property="og:image:alt" content="Gitコマンドの勉強記録"/><meta property="og:image:width" content="1200"/><meta property="og:image:height" content="700"/><meta name="next-head-count" content="17"/><link rel="preload" href="/_next/static/css/df6bb53438996960.css" as="style"/><link rel="stylesheet" href="/_next/static/css/df6bb53438996960.css" data-n-g=""/><noscript data-n-css=""></noscript><script defer="" nomodule="" src="/_next/static/chunks/polyfills-c67a75d1b6f99dc8.js"></script><script src="/_next/static/chunks/webpack-8fa1640cc84ba8fe.js" defer=""></script><script src="/_next/static/chunks/framework-7751730b10fa0f74.js" defer=""></script><script src="/_next/static/chunks/main-480c748fb908b436.js" defer=""></script><script src="/_next/static/chunks/pages/_app-5a840d570c522cf0.js" defer=""></script><script src="/_next/static/chunks/7-a9ae6bf2d6049209.js" defer=""></script><script src="/_next/static/chunks/pages/posts/%5Bslug%5D-31ed6b5e8c78747a.js" defer=""></script><script src="/_next/static/hnqBLK_Hn_sJaGDbWgeJa/_buildManifest.js" defer=""></script><script src="/_next/static/hnqBLK_Hn_sJaGDbWgeJa/_ssgManifest.js" defer=""></script></head><body><div id="__next"><div class="flex flex-col min-h-screen bg-zinc-800"><header class="sticky top-0 border-b border-zinc-400 z-10 bg-zinc-900 text-slate-400"><div class="max-w-4xl mx-auto flex justify-between items-center h-12"><a href="/">Home</a><a target="_blank" href="https://github.com/jirentaicho">Github</a><a target="_blank" href="https://zenn.dev/misaka">Zenn</a></div></header><main class="flex-1 max-w-4xl w-full mx-auto"><div class="prose prose-lg max-w-none text-emerald-400"><h1 class="mt-12">Gitコマンドの勉強記録</h1><span>2022.02.13</span><div class="space-x-2"><span><a class="text-emerald-300" href="/categories/Git/">Git</a></span></div></div></main><footer class="bg-zinc-900 text-slate-400"><div class="max-w-4xl w-full mx-auto h-24 flex items-center justify-center"><div>© volkruss.com / Edelstein</div></div></footer></div></div><script id="__NEXT_DATA__" type="application/json">{"props":{"pageProps":{"frontMatter":{"title":"Gitコマンドの勉強記録","date":"2022.02.13","description":"Gitコマンドの勉強記録","categories":["Git"]},"content":"\u003cp\u003e完全にメモです。\u003c/p\u003e\n\u003cp\u003e私は仕事ではSVNを使っていたのですが、あるタイミングでgitに移行しました。SVNは使いやすいと思いますが、もうオワコン感があります。\u003c/p\u003e\n\u003cp\u003eSVNは覚えることが少ないです。というか、そんなに覚えてなくてもなんとかなります。\u003c/p\u003e\n\u003cp\u003e環境はWindowsです。\u003c/p\u003e\n\u003ch2\u003e特定のコミットに戻す\u003c/h2\u003e\n\u003cp\u003e参考：https://qiita.com/Yorinton/items/e0e969d961b17a359e19\u003c/p\u003e\n\u003cp\u003egit logでハッシュ値を取得したら、rest –hardで戻せるようだ。早速やってみた\u003c/p\u003e\n\u003cp\u003e\u003cimg src=\"/1046/1.png\" alt=\"画像\"\u003e\u003c/p\u003e\n\u003cdiv class=\"remark-highlight\"\u003e\u003cpre class=\"language-html\"\u003e\u003ccode class=\"language-html\"\u003egit log\ngit reset --hard ハッシュ値\nHEAD is now at 506b865 s\n\u003c/code\u003e\u003c/pre\u003e\u003c/div\u003e\n\u003cp\u003eファイルの内容も戻っていた。\u003c/p\u003e\n\u003cp\u003eこの状態でファイルを修正してpushしたらダメでした。\u003c/p\u003e\n\u003cdiv class=\"remark-highlight\"\u003e\u003cpre class=\"language-html\"\u003e\u003ccode class=\"language-html\"\u003e$ git push origin main\nTo https://github.com/jirentaicho/gitc.git\n ! [rejected]        main -\u003e main (non-fast-forward)\nerror: failed to push some refs to 'https://github.com/jirentaicho/gitc.git'\nhint: Updates were rejected because the tip of your current branch is behind\nhint: its remote counterpart. Integrate the remote changes (e.g.\nhint: 'git pull ...') before pushing again.\nhint: See the 'Note about fast-forwards' in 'git push --help' for details.\n\n\u003c/code\u003e\u003c/pre\u003e\u003c/div\u003e\n\u003cp\u003epullするとコンフリクトしてるよって教えてくれました。\u003c/p\u003e\n\u003cdiv class=\"remark-highlight\"\u003e\u003cpre class=\"language-html\"\u003e\u003ccode class=\"language-html\"\u003e$ git pull origin main\nFrom https://github.com/jirentaicho/gitc\n * branch            main       -\u003e FETCH_HEAD\nAuto-merging sample.txt\nCONFLICT (content): Merge conflict in sample.txt\nAutomatic merge failed; fix conflicts and then commit the result.\n\n\u003c/code\u003e\u003c/pre\u003e\u003c/div\u003e\n\u003cp\u003eこの状態だとコミット履歴までも戻っていました。\u003c/p\u003e\n\u003cp\u003eとりあえずpullしてcommitしました。\u003c/p\u003e\n\u003ch2\u003eブランチとコンフリクトとマージ\u003c/h2\u003e\n\u003cdiv class=\"remark-highlight\"\u003e\u003cpre class=\"language-html\"\u003e\u003ccode class=\"language-html\"\u003e$ git switch -c sample\nSwitched to a new branch 'sample'\n\n\u003c/code\u003e\u003c/pre\u003e\u003c/div\u003e\n\u003cp\u003eこの状態で適当に修正してpushします。そしてmainブランチに戻ってsample2ブランチを作成して、適当に修正してpush\u003c/p\u003e\n\u003cp\u003esampleのプルリクをmergeして、sample2はコンフリクトします\u003c/p\u003e\n\u003cp\u003e\u003cimg src=\"/1046/2.png\" alt=\"画像\"\u003e\u003c/p\u003e\n\u003cp\u003esampleで修正した内容とsample2で修正した内容が被ったのでコンフリクトを起こしました。\u003c/p\u003e\n\u003cp\u003e一旦mainを更新して最新にして、sample2に切り替えて、マージをします。\u003c/p\u003e\n\u003cdiv class=\"remark-highlight\"\u003e\u003cpre class=\"language-html\"\u003e\u003ccode class=\"language-html\"\u003e$ git checkout main\nSwitched to branch 'main'\n\n$ git pull origin main\nFrom https://github.com/jirentaicho/gitc\n * branch            main       -\u003e FETCH_HEAD\nUpdating ca212f7..9911271\nFast-forward\n sample.txt | 1 +\n 1 file changed, 1 insertion(+)\n\n$ git switch sample2\nSwitched to branch 'sample2'\n\n$ git fetch origin\n\n$ git merge main\nAuto-merging sample.txt\nCONFLICT (content): Merge conflict in sample.txt\nAutomatic merge failed; fix conflicts and then commit the result.\n\n\u003c/code\u003e\u003c/pre\u003e\u003c/div\u003e\n\u003cp\u003eこんな感じでファイルが表示されます\u003c/p\u003e\n\u003cdiv class=\"remark-highlight\"\u003e\u003cpre class=\"language-html\"\u003e\u003ccode class=\"language-html\"\u003e１、コミットします\n２、修正しました\n\u0026#x3C;\u0026#x3C;\u0026#x3C;\u0026#x3C;\u0026#x3C;\u0026#x3C;\u0026#x3C; HEAD\n３、コンフリクトした箇所\n=======\n３、ブランチをsample\n\u003e\u003e\u003e\u003e\u003e\u003e\u003e main\n\n\u003c/code\u003e\u003c/pre\u003e\u003c/div\u003e\n\u003cp\u003e修正して再度pushしてマージプルリクエストをしてみますと、マージ可能になります。\u003c/p\u003e\n\u003cp\u003e\u003cimg src=\"/1046/3.png\" alt=\"画像\"\u003e\u003c/p\u003e\n\u003cp\u003egitkで見るとこんな感じです\u003c/p\u003e\n\u003cp\u003e\u003cimg src=\"/1046/4.png\" alt=\"画像\"\u003e\u003c/p\u003e\n\u003ch2\u003eソースツリーの導入\u003c/h2\u003e\n\u003cp\u003egitkで見てるよりソースツリーを使ったほうが良さそうだったので、導入してみます。\u003c/p\u003e\n\u003cp\u003ehttps://www.sourcetreeapp.com/\u003c/p\u003e\n\u003cp\u003e左メニューにブランチの一覧も表示されていていいですね。\u003c/p\u003e\n\u003cp\u003e\u003cimg src=\"/1046/5.png\" alt=\"画像\"\u003e\u003c/p\u003e\n\u003cp\u003eチェックアウトもマージも簡単にできそうですね。\u003c/p\u003e\n\u003cp\u003e\u003cimg src=\"/1046/6.png\" alt=\"画像\"\u003e\u003c/p\u003e\n\u003cp\u003e※コマンドの勉強記録なので、あくまで目視が楽だよということで使っていきます。\u003c/p\u003e\n\u003ch2\u003eリベース\u003c/h2\u003e\n\u003cp\u003e今度はsampleブランチにsample2の変更をリベースで取り込んでみます。リベースをするとブランチごとマージしてくれます。\u003c/p\u003e\n\u003cp\u003e色々弄ってしまったのですが、以下のようにしました。\u003c/p\u003e\n\u003cp\u003e\u003cimg src=\"/1046/7.png\" alt=\"画像\"\u003e\u003c/p\u003e\n\u003cp\u003emainブランチがあって、newBranchAとnewBranchBというブランチがあり、それぞれコミット履歴があります。つまり３つのブランチがある状態です。\u003c/p\u003e\n\u003cp\u003eここでnewBranchAからnewBranchBをリベースしてみます。\u003c/p\u003e\n\u003cp\u003egit rebase ブランチ名\u003c/p\u003e\n\u003cdiv class=\"remark-highlight\"\u003e\u003cpre class=\"language-html\"\u003e\u003ccode class=\"language-html\"\u003ekirino@LAPTOP-GQK0K0U4 MINGW64 /d/work/github (newBranchA)\n$ git rebase newBranchB\nSuccessfully rebased and updated refs/heads/newBranchA.\n\n\n\u003c/code\u003e\u003c/pre\u003e\u003c/div\u003e\n\u003cp\u003eするとブランチが１つになりました。ブランチAにブランチBのコミット内容が取り込まれて一つになっています。なので３つのブランチから２つのブランチになりました。\u003c/p\u003e\n\u003cp\u003e\u003cimg src=\"/1046/8.png\" alt=\"画像\"\u003e\u003c/p\u003e\n\u003cp\u003eわかりづらいですが、newBranchBで追加したファイルがnewBranchAでも取り込まれているのが確認できます。\u003c/p\u003e\n\u003cp\u003e\u003cimg src=\"/1046/9.png\" alt=\"画像\"\u003e\u003c/p\u003e\n\u003cp\u003eこの状態でpushしてみます。\u003c/p\u003e\n\u003cdiv class=\"remark-highlight\"\u003e\u003cpre class=\"language-html\"\u003e\u003ccode class=\"language-html\"\u003e$ git push origin newBranchA\nEnumerating objects: 5, done.\nCounting objects: 100% (5/5), done.\nDelta compression using up to 16 threads\nCompressing objects: 100% (4/4), done.\nWriting objects: 100% (4/4), 452 bytes | 226.00 KiB/s, done.\nTotal 4 (delta 1), reused 0 (delta 0), pack-reused 0\nremote: Resolving deltas: 100% (1/1), done.\nremote:\nremote: Create a pull request for 'newBranchA' on GitHub by visiting:\nremote:      https://github.com/jirentaicho/gitc/pull/new/newBranchA\nremote:\nTo https://github.com/jirentaicho/gitc.git\n * [new branch]      newBranchA -\u003e newBranchA\n\n\u003c/code\u003e\u003c/pre\u003e\u003c/div\u003e\n\u003cp\u003epush内容としてはnewBranchBで行っていたコミットもありました。\u003c/p\u003e\n\u003cp\u003e\u003cimg src=\"/1046/10.png\" alt=\"画像\"\u003e\u003c/p\u003e\n\u003cp\u003epush済のコミットはリベースしちゃダメ。コミット履歴の不整合が生じるため。\u003c/p\u003e\n\u003cp\u003eというわけでやってみます。\u003c/p\u003e\n\u003cp\u003e先ほどと同じような構成で、hoge fugaブランチを追加しました。\u003c/p\u003e\n\u003cp\u003e\u003cimg src=\"/1046/11.png\" alt=\"画像\"\u003e\u003c/p\u003e\n\u003cp\u003ehogeブランチをpushします。\u003c/p\u003e\n\u003cdiv class=\"remark-highlight\"\u003e\u003cpre class=\"language-html\"\u003e\u003ccode class=\"language-html\"\u003e$ git push origin hoge\nEnumerating objects: 5, done.\nCounting objects: 100% (5/5), done.\nDelta compression using up to 16 threads\nCompressing objects: 100% (4/4), done.\nWriting objects: 100% (4/4), 459 bytes | 459.00 KiB/s, done.\nTotal 4 (delta 1), reused 0 (delta 0), pack-reused 0\nremote: Resolving deltas: 100% (1/1), done.\nremote:\nremote: Create a pull request for 'hoge' on GitHub by visiting:\nremote:      https://github.com/jirentaicho/gitc/pull/new/hoge\nremote:\nTo https://github.com/jirentaicho/gitc.git\n * [new branch]      hoge -\u003e hoge\n\n\u003c/code\u003e\u003c/pre\u003e\u003c/div\u003e\n\u003cp\u003eリベースします\u003c/p\u003e\n\u003cdiv class=\"remark-highlight\"\u003e\u003cpre class=\"language-html\"\u003e\u003ccode class=\"language-html\"\u003e$ git rebase fuga\nSuccessfully rebased and updated refs/heads/hoge.\n\u003c/code\u003e\u003c/pre\u003e\u003c/div\u003e\n\u003cp\u003e\u003cimg src=\"/1046/12.png\" alt=\"画像\"\u003e\u003c/p\u003e\n\u003cp\u003eここでpushしてみます。\u003c/p\u003e\n\u003cdiv class=\"remark-highlight\"\u003e\u003cpre class=\"language-html\"\u003e\u003ccode class=\"language-html\"\u003e$ git push origin hoge\nTo https://github.com/jirentaicho/gitc.git\n ! [rejected]        hoge -\u003e hoge (non-fast-forward)\nerror: failed to push some refs to 'https://github.com/jirentaicho/gitc.git'\nhint: Updates were rejected because the tip of your current branch is behind\nhint: its remote counterpart. Integrate the remote changes (e.g.\nhint: 'git pull ...') before pushing again.\nhint: See the 'Note about fast-forwards' in 'git push --help' for details.\n\n\u003c/code\u003e\u003c/pre\u003e\u003c/div\u003e\n\u003cp\u003epullしてpushします\u003c/p\u003e\n\u003cdiv class=\"remark-highlight\"\u003e\u003cpre class=\"language-html\"\u003e\u003ccode class=\"language-html\"\u003e$ git pull origin hoge\nFrom https://github.com/jirentaicho/gitc\n * branch            hoge       -\u003e FETCH_HEAD\nMerge made by the 'recursive' strategy.\n\n$ git push origin hoge\nEnumerating objects: 7, done.\nCounting objects: 100% (7/7), done.\nDelta compression using up to 16 threads\nCompressing objects: 100% (5/5), done.\nWriting objects: 100% (5/5), 608 bytes | 608.00 KiB/s, done.\nTotal 5 (delta 3), reused 0 (delta 0), pack-reused 0\n\u003c/code\u003e\u003c/pre\u003e\u003c/div\u003e\n\u003cp\u003e\u003cimg src=\"/1046/13.png\" alt=\"画像\"\u003e\u003c/p\u003e\n\u003ch2\u003eリベース時にコンフリ\u003c/h2\u003e\n\u003cp\u003e次は違うブランチでそれぞれ同じファイルを修正して、リベースしてみます。\u003c/p\u003e\n\u003cp\u003e\u003cimg src=\"/1046/14.png\" alt=\"画像\"\u003e\u003c/p\u003e\n\u003cp\u003etypeaとtypebで同じファイルを修正しています。\u003c/p\u003e\n\u003cp\u003eこの状態でtypeaからtypebをリベースしてみます。\u003c/p\u003e\n\u003cdiv class=\"remark-highlight\"\u003e\u003cpre class=\"language-html\"\u003e\u003ccode class=\"language-html\"\u003e$ git rebase typeb\nerror: could not apply 19166ff... sample.txtの修正\nResolve all conflicts manually, mark them as resolved with\n\"git add/rm \u003cspan class=\"token tag\"\u003e\u003cspan class=\"token tag\"\u003e\u003cspan class=\"token punctuation\"\u003e\u0026#x3C;\u003c/span\u003econflicted_files\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e\u003e\u003c/span\u003e\u003c/span\u003e\", then run \"git rebase --continue\".\nYou can instead skip this commit: run \"git rebase --skip\".\nTo abort and get back to the state before \"git rebase\", run \"git rebase --abort\".\nCould not apply 19166ff... sample.txtの修正\nAuto-merging sample.txt\nCONFLICT (content): Merge conflict in sample.txt\n\u003c/code\u003e\u003c/pre\u003e\u003c/div\u003e\n\u003cp\u003eコンフリクトしましたよ。ってメッセージがあります。ファイルを確認しても内容がわかります。\u003c/p\u003e\n\u003cdiv class=\"remark-highlight\"\u003e\u003cpre class=\"language-html\"\u003e\u003ccode class=\"language-html\"\u003e１、コミットします\n２、修正しました\n３、ブランチをsample\n４、、コンフリクトした箇所\n\u0026#x3C;\u0026#x3C;\u0026#x3C;\u0026#x3C;\u0026#x3C;\u0026#x3C;\u0026#x3C; HEAD\n５、TYPE-B\n=======\n５、typeA\n\u003e\u003e\u003e\u003e\u003e\u003e\u003e 19166ff (sample.txtの修正)\n\n\u003c/code\u003e\u003c/pre\u003e\u003c/div\u003e\n\u003cp\u003e\u003cimg src=\"/1046/15.png\" alt=\"画像\"\u003e\u003c/p\u003e\n\u003cp\u003epushしてみるとtpyeBの反映がされていないです。コミットされていない変更のことです。\u003c/p\u003e\n\u003cp\u003e\u003cimg src=\"/1046/16.png\" alt=\"画像\"\u003e\u003c/p\u003e\n\u003cp\u003eというわけでコンフリクト対応してgit rebase –continueを実施します。\u003c/p\u003e\n\u003cdiv class=\"remark-highlight\"\u003e\u003cpre class=\"language-html\"\u003e\u003ccode class=\"language-html\"\u003e$ git rebase --continue\nSuccessfully rebased and updated refs/heads/typea.\n\u003c/code\u003e\u003c/pre\u003e\u003c/div\u003e\n\u003cp\u003eちょっと一回pushしてしまったんで、pullして再度コンフリクト対応してcommit後にpushします。\u003c/p\u003e\n\u003cdiv class=\"remark-highlight\"\u003e\u003cpre class=\"language-html\"\u003e\u003ccode class=\"language-html\"\u003e$ git push origin typea\nEnumerating objects: 11, done.\nCounting objects: 100% (11/11), done.\nDelta compression using up to 16 threads\nCompressing objects: 100% (7/7), done.\nWriting objects: 100% (7/7), 777 bytes | 777.00 KiB/s, done.\nTotal 7 (delta 5), reused 0 (delta 0), pack-reused 0\nremote: Resolving deltas: 100% (5/5), completed with 2 local objects.\nTo https://github.com/jirentaicho/gitc.git\n   19166ff..b5b664c  typea -\u003e typea\n\u003c/code\u003e\u003c/pre\u003e\u003c/div\u003e\n\u003cp\u003e\u003cimg src=\"/1046/17.png\" alt=\"画像\"\u003e\u003c/p\u003e\n\u003cp\u003erebaseでコンフリクトしたら、コンフリクト修正してgit rebase –continueをしてやれば良さそうですね。\u003c/p\u003e\n\u003ch2\u003eチェリーピック\u003c/h2\u003e\n\u003cp\u003e特定のコミット履歴の変更を取り込むっぽいです。\u003c/p\u003e\n\u003cp\u003erebaseはブランチごと取り込みましたがチェリーピックを使うと特定のコミットのみを取り込むことができるようですので、さっそくやってみます。\u003c/p\u003e\n\u003cp\u003edev01とdev02というブランチがあります。dev02は、dev02_aとdev02_bというファイルを、それぞれ追加後にコミットしています。\u003c/p\u003e\n\u003cp\u003e\u003cimg src=\"/1046/18.png\" alt=\"画像\"\u003e\u003c/p\u003e\n\u003cp\u003e・dev02_aを追加したときのコミット\u003c/p\u003e\n\u003cp\u003e\u003cimg src=\"/1046/19.png\" alt=\"画像\"\u003e\u003c/p\u003e\n\u003cp\u003e・dev02_bを追加したときのコミット\u003c/p\u003e\n\u003cp\u003e\u003cimg src=\"/1046/20.png\" alt=\"画像\"\u003e\u003c/p\u003e\n\u003cp\u003edev01ブランチからdev02_aのみを取り込んでみます。\u003c/p\u003e\n\u003cp\u003egit cherry-pick コミット履歴番号\u003c/p\u003e\n\u003cdiv class=\"remark-highlight\"\u003e\u003cpre class=\"language-html\"\u003e\u003ccode class=\"language-html\"\u003ekirino@LAPTOP-GQK0K0U4 MINGW64 /d/work/github (dev01)\n$ git cherry-pick 92960b1baa2ba8b014cea4ce2ad448da0536017d\n[dev01 b15af9e] add dev02_a\n Date: Sun Feb 13 12:46:19 2022 +0900\n 1 file changed, 0 insertions(+), 0 deletions(-)\n create mode 100644 dev02_a\n\n\n\u003c/code\u003e\u003c/pre\u003e\u003c/div\u003e\n\u003cp\u003edev02_aのみが取り込まれているのが確認できます\u003c/p\u003e\n\u003cdiv class=\"remark-highlight\"\u003e\u003cpre class=\"language-html\"\u003e\u003ccode class=\"language-html\"\u003ekirino@LAPTOP-GQK0K0U4 MINGW64 /d/work/github (dev01)\n$ ls\na  a.txt  branchb.txt  dev01  dev02_a  fuga.java  hoge.java  main.java  main.txt  readme.md  sample.txt\n\n\u003c/code\u003e\u003c/pre\u003e\u003c/div\u003e\n\u003cp\u003e\u003cimg src=\"/1046/21.png\" alt=\"画像\"\u003e\u003c/p\u003e\n\u003cp\u003e今回はgitのマージ系に焦点を当てました。私は現場でrebaseとcherry-pickは使ったことが無いのですが、覚えておくと便利そうです。\u003c/p\u003e","slug":"p1046"},"__N_SSG":true},"page":"/posts/[slug]","query":{"slug":"p1046"},"buildId":"hnqBLK_Hn_sJaGDbWgeJa","isFallback":false,"gsp":true,"scriptLoader":[]}</script></body></html>