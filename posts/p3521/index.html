<!DOCTYPE html><html><head><meta charSet="utf-8"/><meta name="viewport" content="width=device-width"/><meta name="twitter:card" content="summary_large_image"/><meta name="twitter:site" content="@site"/><meta name="twitter:creator" content="@keisukesiratori"/><meta property="og:site_name" content="Edelstein"/><title>TypeScriptでRPGツクールMVのプラグインを作る</title><meta name="robots" content="index,follow"/><meta name="description" content="TypeScriptでRPGツクールMVのプラグインを作る"/><meta property="og:title" content="TypeScriptでRPGツクールMVのプラグインを作る"/><meta property="og:description" content="TypeScriptでRPGツクールMVのプラグインを作る"/><meta property="og:url" content="http:localhost:3000/posts/p3521"/><meta property="og:type" content="website"/><meta property="og:image" content="https://locahost:3000/undefined"/><meta property="og:image:alt" content="TypeScriptでRPGツクールMVのプラグインを作る"/><meta property="og:image:width" content="1200"/><meta property="og:image:height" content="700"/><meta name="next-head-count" content="17"/><link rel="preload" href="/_next/static/css/df6bb53438996960.css" as="style"/><link rel="stylesheet" href="/_next/static/css/df6bb53438996960.css" data-n-g=""/><noscript data-n-css=""></noscript><script defer="" nomodule="" src="/_next/static/chunks/polyfills-c67a75d1b6f99dc8.js"></script><script src="/_next/static/chunks/webpack-8fa1640cc84ba8fe.js" defer=""></script><script src="/_next/static/chunks/framework-7751730b10fa0f74.js" defer=""></script><script src="/_next/static/chunks/main-480c748fb908b436.js" defer=""></script><script src="/_next/static/chunks/pages/_app-5a840d570c522cf0.js" defer=""></script><script src="/_next/static/chunks/7-a9ae6bf2d6049209.js" defer=""></script><script src="/_next/static/chunks/pages/posts/%5Bslug%5D-31ed6b5e8c78747a.js" defer=""></script><script src="/_next/static/lPZB0NBHNUwCNxiPNxpHr/_buildManifest.js" defer=""></script><script src="/_next/static/lPZB0NBHNUwCNxiPNxpHr/_ssgManifest.js" defer=""></script></head><body><div id="__next"><div class="flex flex-col min-h-screen bg-zinc-800"><header class="sticky top-0 border-b border-zinc-400 z-10 bg-zinc-900 text-slate-400"><div class="max-w-4xl mx-auto flex justify-between items-center h-12"><a href="/">Home</a><a target="_blank" href="https://github.com/jirentaicho">Github</a><a target="_blank" href="https://zenn.dev/misaka">Zenn</a></div></header><main class="flex-1 max-w-4xl w-full mx-auto"><div class="prose prose-lg max-w-none text-emerald-400"><h1 class="mt-12">TypeScriptでRPGツクールMVのプラグインを作る</h1><span>2022.09.03</span><div class="space-x-2"><span><a class="text-emerald-300" href="/categories/TypeScript/">TypeScript</a></span></div></div></main><footer class="bg-zinc-900 text-slate-400"><div class="max-w-4xl w-full mx-auto h-24 flex items-center justify-center"><div>© volkruss.com / Edelstein</div></div></footer></div></div><script id="__NEXT_DATA__" type="application/json">{"props":{"pageProps":{"frontMatter":{"title":"TypeScriptでRPGツクールMVのプラグインを作る","date":"2022.09.03","description":"TypeScriptでRPGツクールMVのプラグインを作る","categories":["TypeScript"]},"content":"\u003cp\u003e結構前に買ったRPGツクールMVが家から出てきたので、そういえばプラグインってTypeScriptで書けるのかな？と思い検索すると型定義情報など準備している猛者もおりました\u003c/p\u003e\n\u003cp\u003ehttp://narazaka.blog109.fc2.com/blog-entry-248.html\u003c/p\u003e\n\u003cp\u003e当時モバイル向けに簡単にゲームが作れるソフトということで買ったのですが、大して触ることもせずにしまっていた物だし、そもそもRPGツクール自体がよくわかっていないという状態です。\u003c/p\u003e\n\u003ch2\u003eプラグインの認識\u003c/h2\u003e\n\u003cp\u003e既存のプラグインを見てみるとTitleCommandPosition.jsというファイルのプラグインを発見しました。\u003c/p\u003e\n\u003cp\u003eここでは即時関数を定義して実行することでプラグインを実行しているようです。またコメントにて定義しているパラメータは画面上から値を設定してあげることもできるようです。\u003c/p\u003e\n\u003cp\u003eこれはゲーム編集画面のプラグイン管理から認識されるようになっています。\u003c/p\u003e\n\u003cp\u003e\u003cimg src=\"/3521/1.png\" alt=\"画像\"\u003e\u003c/p\u003e\n\u003cp\u003eまずはゲームのエディタから認識されるプラグインを作成してみます\u003c/p\u003e\n\u003cp\u003eTitleCommandPosition.jsを参考にTest.tsというファイルを以下のように作成してみました。\u003c/p\u003e\n\u003cdiv class=\"remark-highlight\"\u003e\u003cpre class=\"language-ts\"\u003e\u003ccode class=\"language-ts\"\u003e\u003cspan class=\"token comment\"\u003e/// \u0026#x3C;reference types=\"rpgmakermv_typescript_dts\"/\u003e\u003c/span\u003e\n\u003cspan class=\"token comment\"\u003e//=============================================================================\u003c/span\u003e\n\u003cspan class=\"token comment\"\u003e// Test.js\u003c/span\u003e\n\u003cspan class=\"token comment\"\u003e//=============================================================================\u003c/span\u003e\n\n\u003cspan class=\"token comment\"\u003e/*:ja\u003c/span\u003e\n\u003cspan class=\"token comment\"\u003e * @plugindesc  サンプルのプラグインです\u003c/span\u003e\n\u003cspan class=\"token comment\"\u003e * @author Misaka Mikoto\u003c/span\u003e\n\u003cspan class=\"token comment\"\u003e *\u003c/span\u003e\n\u003cspan class=\"token comment\"\u003e * @param Message\u003c/span\u003e\n\u003cspan class=\"token comment\"\u003e * @desc 表示するメッセージです\u003c/span\u003e\n\u003cspan class=\"token comment\"\u003e * @default 御坂美琴\u003c/span\u003e\n\u003cspan class=\"token comment\"\u003e *\u003c/span\u003e\n\u003cspan class=\"token comment\"\u003e * @help このプラグインには、プラグインコマンドはありません。\u003c/span\u003e\n\u003cspan class=\"token comment\"\u003e */\u003c/span\u003e\n\u003cspan class=\"token punctuation\"\u003e(\u003c/span\u003e\u003cspan class=\"token keyword\"\u003efunction\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e(\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e)\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e{\u003c/span\u003e\n    \u003cspan class=\"token keyword\"\u003econst\u003c/span\u003e parameters \u003cspan class=\"token operator\"\u003e=\u003c/span\u003e PluginManager\u003cspan class=\"token punctuation\"\u003e.\u003c/span\u003e\u003cspan class=\"token function\"\u003eparameters\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e(\u003c/span\u003e\u003cspan class=\"token string\"\u003e\"Test\"\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e)\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e;\u003c/span\u003e\n    \u003cspan class=\"token builtin\"\u003econsole\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e.\u003c/span\u003e\u003cspan class=\"token function\"\u003elog\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e(\u003c/span\u003eparameters\u003cspan class=\"token punctuation\"\u003e[\u003c/span\u003e\u003cspan class=\"token string\"\u003e\"Message\"\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e]\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e)\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e;\u003c/span\u003e\n\u003cspan class=\"token punctuation\"\u003e}\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e)\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e(\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e)\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e;\u003c/span\u003e\n\u003c/code\u003e\u003c/pre\u003e\u003c/div\u003e\n\u003cp\u003eこれをjsに変換してRPGツクールのjs/pluginsフォルダに入れると\u003c/p\u003e\n\u003cp\u003e\u003cimg src=\"/3521/2.png\" alt=\"画像\"\u003e\u003c/p\u003e\n\u003cp\u003eちゃんと認識されていました。このプラグインを適用してブラウザで実行するとコンソールログに御坂美琴が流れます\u003c/p\u003e\n\u003cp\u003e\u003cimg src=\"/3521/3.png\" alt=\"画像\"\u003e\u003c/p\u003e\n\u003cp\u003eまたplugins.jsも自動的に修正されています\u003c/p\u003e\n\u003cdiv class=\"remark-highlight\"\u003e\u003cpre class=\"language-js\"\u003e\u003ccode class=\"language-js\"\u003e\u003cspan class=\"token comment\"\u003e// Generated by RPG Maker.\u003c/span\u003e\n\u003cspan class=\"token comment\"\u003e// Do not edit this file directly.\u003c/span\u003e\n\u003cspan class=\"token keyword\"\u003evar\u003c/span\u003e $plugins \u003cspan class=\"token operator\"\u003e=\u003c/span\u003e\n\u003cspan class=\"token punctuation\"\u003e[\u003c/span\u003e\n\u003cspan class=\"token punctuation\"\u003e{\u003c/span\u003e\u003cspan class=\"token string-property property\"\u003e\"name\"\u003c/span\u003e\u003cspan class=\"token operator\"\u003e:\u003c/span\u003e\u003cspan class=\"token string\"\u003e\"Test\"\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e,\u003c/span\u003e\u003cspan class=\"token string-property property\"\u003e\"status\"\u003c/span\u003e\u003cspan class=\"token operator\"\u003e:\u003c/span\u003e\u003cspan class=\"token boolean\"\u003etrue\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e,\u003c/span\u003e\u003cspan class=\"token string-property property\"\u003e\"description\"\u003c/span\u003e\u003cspan class=\"token operator\"\u003e:\u003c/span\u003e\u003cspan class=\"token string\"\u003e\"サンプルのプラグインです\"\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e,\u003c/span\u003e\u003cspan class=\"token string-property property\"\u003e\"parameters\"\u003c/span\u003e\u003cspan class=\"token operator\"\u003e:\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e{\u003c/span\u003e\u003cspan class=\"token string-property property\"\u003e\"Message\"\u003c/span\u003e\u003cspan class=\"token operator\"\u003e:\u003c/span\u003e\u003cspan class=\"token string\"\u003e\"御坂美琴\"\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e}\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e}\u003c/span\u003e\n\u003cspan class=\"token punctuation\"\u003e]\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e;\u003c/span\u003e\n\u003c/code\u003e\u003c/pre\u003e\u003c/div\u003e\n\u003cp\u003e※厳密にいうと認識自体はjsファイルさえ置けばしてくれます。\u003c/p\u003e\n\u003cp\u003eblankfile.jsという空ファイルを適用させた結果\u003c/p\u003e\n\u003cdiv class=\"remark-highlight\"\u003e\u003cpre class=\"language-js\"\u003e\u003ccode class=\"language-js\"\u003e\u003cspan class=\"token comment\"\u003e// Generated by RPG Maker.\u003c/span\u003e\n\u003cspan class=\"token comment\"\u003e// Do not edit this file directly.\u003c/span\u003e\n\u003cspan class=\"token keyword\"\u003evar\u003c/span\u003e $plugins \u003cspan class=\"token operator\"\u003e=\u003c/span\u003e\n\u003cspan class=\"token punctuation\"\u003e[\u003c/span\u003e\n\u003cspan class=\"token punctuation\"\u003e{\u003c/span\u003e\u003cspan class=\"token string-property property\"\u003e\"name\"\u003c/span\u003e\u003cspan class=\"token operator\"\u003e:\u003c/span\u003e\u003cspan class=\"token string\"\u003e\"blankfile\"\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e,\u003c/span\u003e\u003cspan class=\"token string-property property\"\u003e\"status\"\u003c/span\u003e\u003cspan class=\"token operator\"\u003e:\u003c/span\u003e\u003cspan class=\"token boolean\"\u003etrue\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e,\u003c/span\u003e\u003cspan class=\"token string-property property\"\u003e\"description\"\u003c/span\u003e\u003cspan class=\"token operator\"\u003e:\u003c/span\u003e\u003cspan class=\"token string\"\u003e\"\"\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e,\u003c/span\u003e\u003cspan class=\"token string-property property\"\u003e\"parameters\"\u003c/span\u003e\u003cspan class=\"token operator\"\u003e:\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e{\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e}\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e}\u003c/span\u003e\n\u003cspan class=\"token punctuation\"\u003e]\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e;\u003c/span\u003e\n\n\u003c/code\u003e\u003c/pre\u003e\u003c/div\u003e\n\u003ch2\u003ewebpack\u003c/h2\u003e\n\u003cp\u003eここからは少しTypeScriptっぽく書きたいと思いますので、プラグインファイルはバンドルして作成します。そのためwebpackを利用します。\u003c/p\u003e\n\u003cp\u003e以下のようなwebpack.config.jsを作成します。\u003c/p\u003e\n\u003cdiv class=\"remark-highlight\"\u003e\u003cpre class=\"language-js\"\u003e\u003ccode class=\"language-js\"\u003e\u003cspan class=\"token keyword\"\u003econst\u003c/span\u003e path \u003cspan class=\"token operator\"\u003e=\u003c/span\u003e \u003cspan class=\"token function\"\u003erequire\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e(\u003c/span\u003e\u003cspan class=\"token string\"\u003e'path'\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e)\u003c/span\u003e\nmodule\u003cspan class=\"token punctuation\"\u003e.\u003c/span\u003e\u003cspan class=\"token property-access\"\u003eexports\u003c/span\u003e \u003cspan class=\"token operator\"\u003e=\u003c/span\u003e \u003cspan class=\"token punctuation\"\u003e{\u003c/span\u003e\n    \u003cspan class=\"token literal-property property\"\u003emode\u003c/span\u003e\u003cspan class=\"token operator\"\u003e:\u003c/span\u003e \u003cspan class=\"token string\"\u003e\"none\"\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e,\u003c/span\u003e \u003cspan class=\"token comment\"\u003e// 余計なコメントが入るのでnoneを指定\u003c/span\u003e\n    \u003cspan class=\"token literal-property property\"\u003eentry\u003c/span\u003e\u003cspan class=\"token operator\"\u003e:\u003c/span\u003e \u003cspan class=\"token string\"\u003e'./src/main.ts'\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e,\u003c/span\u003e \u003cspan class=\"token comment\"\u003e// 入口となるファイル\u003c/span\u003e\n    \u003cspan class=\"token literal-property property\"\u003eoutput\u003c/span\u003e\u003cspan class=\"token operator\"\u003e:\u003c/span\u003e \u003cspan class=\"token punctuation\"\u003e{\u003c/span\u003e   \u003cspan class=\"token comment\"\u003e//　バンドルしたファイルの出力先\u003c/span\u003e\n        \u003cspan class=\"token literal-property property\"\u003epath\u003c/span\u003e\u003cspan class=\"token operator\"\u003e:\u003c/span\u003e path\u003cspan class=\"token punctuation\"\u003e.\u003c/span\u003e\u003cspan class=\"token method function property-access\"\u003eresolve\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e(\u003c/span\u003e__dirname\u003cspan class=\"token punctuation\"\u003e,\u003c/span\u003e \u003cspan class=\"token string\"\u003e'public'\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e)\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e,\u003c/span\u003e \u003cspan class=\"token comment\"\u003e// publicフォルダ\u003c/span\u003e\n        \u003cspan class=\"token literal-property property\"\u003efilename\u003c/span\u003e\u003cspan class=\"token operator\"\u003e:\u003c/span\u003e \u003cspan class=\"token string\"\u003e'MyPlugin.js'\u003c/span\u003e\n    \u003cspan class=\"token punctuation\"\u003e}\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e,\u003c/span\u003e\n    \u003cspan class=\"token literal-property property\"\u003eresolve\u003c/span\u003e\u003cspan class=\"token operator\"\u003e:\u003c/span\u003e \u003cspan class=\"token punctuation\"\u003e{\u003c/span\u003e \u003cspan class=\"token comment\"\u003e//インポート時ファイル拡張子を省略します\u003c/span\u003e\n        \u003cspan class=\"token literal-property property\"\u003eextensions\u003c/span\u003e\u003cspan class=\"token operator\"\u003e:\u003c/span\u003e \u003cspan class=\"token punctuation\"\u003e[\u003c/span\u003e\u003cspan class=\"token string\"\u003e'.ts'\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e,\u003c/span\u003e \u003cspan class=\"token string\"\u003e'.js'\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e]\u003c/span\u003e\n    \u003cspan class=\"token punctuation\"\u003e}\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e,\u003c/span\u003e\n    \u003cspan class=\"token literal-property property\"\u003emodule\u003c/span\u003e\u003cspan class=\"token operator\"\u003e:\u003c/span\u003e \u003cspan class=\"token punctuation\"\u003e{\u003c/span\u003e\n        \u003cspan class=\"token literal-property property\"\u003erules\u003c/span\u003e\u003cspan class=\"token operator\"\u003e:\u003c/span\u003e \u003cspan class=\"token punctuation\"\u003e[\u003c/span\u003e\n            \u003cspan class=\"token punctuation\"\u003e{\u003c/span\u003e\n                \u003cspan class=\"token literal-property property\"\u003eloader\u003c/span\u003e\u003cspan class=\"token operator\"\u003e:\u003c/span\u003e \u003cspan class=\"token string\"\u003e'ts-loader'\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e,\u003c/span\u003e\n                \u003cspan class=\"token literal-property property\"\u003etest\u003c/span\u003e\u003cspan class=\"token operator\"\u003e:\u003c/span\u003e \u003cspan class=\"token regex\"\u003e\u003cspan class=\"token regex-delimiter\"\u003e/\u003c/span\u003e\u003cspan class=\"token regex-source language-regex\"\u003e\u003cspan class=\"token special-escape escape\"\u003e\\.\u003c/span\u003ets\u003cspan class=\"token anchor function\"\u003e$\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"token regex-delimiter\"\u003e/\u003c/span\u003e\u003c/span\u003e \u003cspan class=\"token punctuation\"\u003e,\u003c/span\u003e\n                \u003cspan class=\"token literal-property property\"\u003eexclude\u003c/span\u003e\u003cspan class=\"token operator\"\u003e:\u003c/span\u003e \u003cspan class=\"token regex\"\u003e\u003cspan class=\"token regex-delimiter\"\u003e/\u003c/span\u003e\u003cspan class=\"token regex-source language-regex\"\u003enode_modules\u003c/span\u003e\u003cspan class=\"token regex-delimiter\"\u003e/\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e,\u003c/span\u003e\n            \u003cspan class=\"token punctuation\"\u003e}\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e,\u003c/span\u003e\n        \u003cspan class=\"token punctuation\"\u003e]\u003c/span\u003e\n    \u003cspan class=\"token punctuation\"\u003e}\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e,\u003c/span\u003e\n    \u003cspan class=\"token literal-property property\"\u003eperformance\u003c/span\u003e\u003cspan class=\"token operator\"\u003e:\u003c/span\u003e \u003cspan class=\"token punctuation\"\u003e{\u003c/span\u003e\n        \u003cspan class=\"token literal-property property\"\u003emaxAssetSize\u003c/span\u003e\u003cspan class=\"token operator\"\u003e:\u003c/span\u003e \u003cspan class=\"token number\"\u003e99999999\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e,\u003c/span\u003e \u003cspan class=\"token comment\"\u003e//バンドル可能サイズを変更する\u003c/span\u003e\n    \u003cspan class=\"token punctuation\"\u003e}\u003c/span\u003e\n\u003cspan class=\"token punctuation\"\u003e}\u003c/span\u003e\n\u003c/code\u003e\u003c/pre\u003e\u003c/div\u003e\n\u003cp\u003esrc/main.tsというファイルを起点にMyPlugin.jsというファイルを作成します。またmodeはnoneにしておきます。\u003c/p\u003e\n\u003cp\u003eSample.tsを作成して以下のように記載します\u003c/p\u003e\n\u003cdiv class=\"remark-highlight\"\u003e\u003cpre class=\"language-ts\"\u003e\u003ccode class=\"language-ts\"\u003e\u003cspan class=\"token keyword\"\u003eexport\u003c/span\u003e \u003cspan class=\"token keyword\"\u003eclass\u003c/span\u003e \u003cspan class=\"token class-name\"\u003eSample\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e{\u003c/span\u003e\n    \u003cspan class=\"token keyword\"\u003epublic\u003c/span\u003e \u003cspan class=\"token function\"\u003eshow\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e(\u003c/span\u003earg\u003cspan class=\"token operator\"\u003e:\u003c/span\u003e\u003cspan class=\"token builtin\"\u003estring\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e)\u003c/span\u003e\u003cspan class=\"token operator\"\u003e:\u003c/span\u003e \u003cspan class=\"token keyword\"\u003evoid\u003c/span\u003e  \u003cspan class=\"token punctuation\"\u003e{\u003c/span\u003e\n        \u003cspan class=\"token builtin\"\u003econsole\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e.\u003c/span\u003e\u003cspan class=\"token function\"\u003elog\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e(\u003c/span\u003e\u003cspan class=\"token string\"\u003e\"Sample.\"\u003c/span\u003e \u003cspan class=\"token operator\"\u003e+\u003c/span\u003e arg\u003cspan class=\"token punctuation\"\u003e)\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e;\u003c/span\u003e\n    \u003cspan class=\"token punctuation\"\u003e}\u003c/span\u003e\n\u003cspan class=\"token punctuation\"\u003e}\u003c/span\u003e\n\u003c/code\u003e\u003c/pre\u003e\u003c/div\u003e\n\u003cp\u003emain.tsではこのSampleクラスを利用します。またshowメソッドの引数はエディタから受け取ります\u003c/p\u003e\n\u003cdiv class=\"remark-highlight\"\u003e\u003cpre class=\"language-ts\"\u003e\u003ccode class=\"language-ts\"\u003e\u003cspan class=\"token comment\"\u003e/// \u0026#x3C;reference types=\"rpgmakermv_typescript_dts\"/\u003e\u003c/span\u003e\n\n\u003cspan class=\"token keyword\"\u003eimport\u003c/span\u003e \u003cspan class=\"token punctuation\"\u003e{\u003c/span\u003e Sample \u003cspan class=\"token punctuation\"\u003e}\u003c/span\u003e \u003cspan class=\"token keyword\"\u003efrom\u003c/span\u003e \u003cspan class=\"token string\"\u003e\"./Sample\"\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e;\u003c/span\u003e\n\n\u003cspan class=\"token comment\"\u003e//=============================================================================\u003c/span\u003e\n\u003cspan class=\"token comment\"\u003e// main.js\u003c/span\u003e\n\u003cspan class=\"token comment\"\u003e//=============================================================================\u003c/span\u003e\n\n\u003cspan class=\"token comment\"\u003e/*:ja\u003c/span\u003e\n\u003cspan class=\"token comment\"\u003e * @plugindesc  このプラグインを適用してください\u003c/span\u003e\n\u003cspan class=\"token comment\"\u003e * @author Misaka Mikoto\u003c/span\u003e\n\u003cspan class=\"token comment\"\u003e * \u003c/span\u003e\n\u003cspan class=\"token comment\"\u003e * @param Message\u003c/span\u003e\n\u003cspan class=\"token comment\"\u003e * @desc 表示するメッセージです\u003c/span\u003e\n\u003cspan class=\"token comment\"\u003e * @default 御坂美琴\u003c/span\u003e\n\u003cspan class=\"token comment\"\u003e *\u003c/span\u003e\n\u003cspan class=\"token comment\"\u003e * @help このプラグインには、プラグインコマンドはありません。\u003c/span\u003e\n\u003cspan class=\"token comment\"\u003e */\u003c/span\u003e\n\u003cspan class=\"token punctuation\"\u003e(\u003c/span\u003e\u003cspan class=\"token keyword\"\u003efunction\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e(\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e)\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e{\u003c/span\u003e\n    \u003cspan class=\"token keyword\"\u003econst\u003c/span\u003e params \u003cspan class=\"token operator\"\u003e=\u003c/span\u003e PluginManager\u003cspan class=\"token punctuation\"\u003e.\u003c/span\u003e\u003cspan class=\"token function\"\u003eparameters\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e(\u003c/span\u003e\u003cspan class=\"token string\"\u003e\"MyPlugin\"\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e)\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e;\u003c/span\u003e \u003cspan class=\"token comment\"\u003e//出力されるファイル名を指定しています\u003c/span\u003e\n    \u003cspan class=\"token keyword\"\u003econst\u003c/span\u003e message \u003cspan class=\"token operator\"\u003e=\u003c/span\u003e params\u003cspan class=\"token punctuation\"\u003e[\u003c/span\u003e\u003cspan class=\"token string\"\u003e\"Message\"\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e]\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e;\u003c/span\u003e\n\n    \u003cspan class=\"token keyword\"\u003econst\u003c/span\u003e sample \u003cspan class=\"token operator\"\u003e=\u003c/span\u003e \u003cspan class=\"token keyword\"\u003enew\u003c/span\u003e \u003cspan class=\"token class-name\"\u003eSample\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e(\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e)\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e;\u003c/span\u003e\n    sample\u003cspan class=\"token punctuation\"\u003e.\u003c/span\u003e\u003cspan class=\"token function\"\u003eshow\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e(\u003c/span\u003emessage\u003cspan class=\"token punctuation\"\u003e)\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e;\u003c/span\u003e\n\n\u003cspan class=\"token punctuation\"\u003e}\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e)\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e(\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e)\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e;\u003c/span\u003e\n\u003c/code\u003e\u003c/pre\u003e\u003c/div\u003e\n\u003cp\u003eそしてnpx webpackコマンドでMyPlugin.jsを作成したら、RPGツクールのプラグインフォルダに入れます。エディタから適用させます。\u003c/p\u003e\n\u003cp\u003e\u003cimg src=\"/3521/4.png\" alt=\"画像\"\u003e\u003c/p\u003e\n\u003cp\u003e実行してみるとMessageで設定した内容がログ出力されていることが確認できます\u003c/p\u003e\n\u003cp\u003e\u003cimg src=\"/3521/5.png\" alt=\"画像\"\u003e\u003c/p\u003e\n\u003cp\u003eもう古いソフトなので今更感がありますが、興味本位でやってみました。\u003c/p\u003e\n\u003ch2\u003e関連記事\u003c/h2\u003e\n\u003cp\u003e\u003ca href=\"/posts/p920\"\u003eリンク\u003c/a\u003e\u003c/p\u003e\n\u003ch2\u003eその他\u003c/h2\u003e\n\u003cp\u003e他にもTypeScriptで書いてるコードがあったので少し見てみました。\u003c/p\u003e\n\u003cp\u003eplugins.jsの$pluginsという変数を利用したい時にはアンビエント宣言をします。\u003c/p\u003e\n\u003cdiv class=\"remark-highlight\"\u003e\u003cpre class=\"language-ts\"\u003e\u003ccode class=\"language-ts\"\u003e\u003cspan class=\"token keyword\"\u003edeclare\u003c/span\u003e \u003cspan class=\"token keyword\"\u003enamespace\u003c/span\u003e \u003cspan class=\"token constant\"\u003eMV\u003c/span\u003e \u003cspan class=\"token punctuation\"\u003e{\u003c/span\u003e\n    \u003cspan class=\"token keyword\"\u003einterface\u003c/span\u003e \u003cspan class=\"token class-name\"\u003ePlugin\u003c/span\u003e \u003cspan class=\"token punctuation\"\u003e{\u003c/span\u003e\n\t\tname\u003cspan class=\"token operator\"\u003e:\u003c/span\u003e \u003cspan class=\"token builtin\"\u003estring\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e;\u003c/span\u003e\n\t\tstatus\u003cspan class=\"token operator\"\u003e:\u003c/span\u003e \u003cspan class=\"token builtin\"\u003eboolean\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e;\u003c/span\u003e\n\t\tdescription\u003cspan class=\"token operator\"\u003e:\u003c/span\u003e \u003cspan class=\"token builtin\"\u003estring\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e;\u003c/span\u003e\n\t\tparameters\u003cspan class=\"token operator\"\u003e:\u003c/span\u003e \u003cspan class=\"token punctuation\"\u003e{\u003c/span\u003e \u003cspan class=\"token punctuation\"\u003e[\u003c/span\u003ename\u003cspan class=\"token operator\"\u003e:\u003c/span\u003e \u003cspan class=\"token builtin\"\u003estring\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e]\u003c/span\u003e\u003cspan class=\"token operator\"\u003e:\u003c/span\u003e \u003cspan class=\"token builtin\"\u003estring\u003c/span\u003e \u003cspan class=\"token punctuation\"\u003e}\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e;\u003c/span\u003e\n\t\u003cspan class=\"token punctuation\"\u003e}\u003c/span\u003e\n\n\u003cspan class=\"token punctuation\"\u003e}\u003c/span\u003e\n\u003cspan class=\"token keyword\"\u003edeclare\u003c/span\u003e \u003cspan class=\"token keyword\"\u003evar\u003c/span\u003e $plugins\u003cspan class=\"token operator\"\u003e:\u003c/span\u003e \u003cspan class=\"token constant\"\u003eMV\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e.\u003c/span\u003ePlugin\u003cspan class=\"token punctuation\"\u003e[\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e]\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e;\u003c/span\u003e\n\u003c/code\u003e\u003c/pre\u003e\u003c/div\u003e\n\u003cp\u003eこうすることでTypeScriptから$pluginsという変数にアクセスできるだけでなく、nameやdescriptionといった値にもアクセスできるようになります。\u003c/p\u003e\n\u003cp\u003eこの$pluginsというのは、エディタからプラグインを適用した時に自動設定されるやつです。\u003c/p\u003e\n\u003cdiv class=\"remark-highlight\"\u003e\u003cpre class=\"language-js\"\u003e\u003ccode class=\"language-js\"\u003e\u003cspan class=\"token comment\"\u003e// Generated by RPG Maker.\u003c/span\u003e\n\u003cspan class=\"token comment\"\u003e// Do not edit this file directly.\u003c/span\u003e\n\u003cspan class=\"token keyword\"\u003evar\u003c/span\u003e $plugins \u003cspan class=\"token operator\"\u003e=\u003c/span\u003e\n\u003cspan class=\"token punctuation\"\u003e[\u003c/span\u003e\n\u003cspan class=\"token punctuation\"\u003e{\u003c/span\u003e\u003cspan class=\"token string-property property\"\u003e\"name\"\u003c/span\u003e\u003cspan class=\"token operator\"\u003e:\u003c/span\u003e\u003cspan class=\"token string\"\u003e\"Test\"\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e,\u003c/span\u003e\u003cspan class=\"token string-property property\"\u003e\"status\"\u003c/span\u003e\u003cspan class=\"token operator\"\u003e:\u003c/span\u003e\u003cspan class=\"token boolean\"\u003etrue\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e,\u003c/span\u003e\u003cspan class=\"token string-property property\"\u003e\"description\"\u003c/span\u003e\u003cspan class=\"token operator\"\u003e:\u003c/span\u003e\u003cspan class=\"token string\"\u003e\"サンプルのプラグインです\"\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e,\u003c/span\u003e\u003cspan class=\"token string-property property\"\u003e\"parameters\"\u003c/span\u003e\u003cspan class=\"token operator\"\u003e:\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e{\u003c/span\u003e\u003cspan class=\"token string-property property\"\u003e\"Message\"\u003c/span\u003e\u003cspan class=\"token operator\"\u003e:\u003c/span\u003e\u003cspan class=\"token string\"\u003e\"御坂美琴\"\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e}\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e}\u003c/span\u003e\n\u003cspan class=\"token punctuation\"\u003e]\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e;\u003c/span\u003e\n\u003c/code\u003e\u003c/pre\u003e\u003c/div\u003e\n\u003cp\u003eこのアンビエント宣言によってnameやらにもTypeScriptからアクセスできるようになります。\u003c/p\u003e\n\u003cp\u003eちなみにこれ($plugins)はRPGツクールMVのmain.jsでPluginManager#setupに渡されて読み込みなどが行われています。そして最終的にはloadScriptメソッド(実際には関数が代入されている)にて、scriptタグとしてHTML出力されます。そしてブラウザにて実行されるようになっています。※コードは載せていいのかわからないので未掲載にしています。\u003c/p\u003e\n\u003cp\u003e↓こんな感じで生成されている。\u003c/p\u003e\n\u003cp\u003e\u003cimg src=\"/3521/6.png\" alt=\"画像\"\u003e\u003c/p\u003e","slug":"p3521"},"__N_SSG":true},"page":"/posts/[slug]","query":{"slug":"p3521"},"buildId":"lPZB0NBHNUwCNxiPNxpHr","isFallback":false,"gsp":true,"scriptLoader":[]}</script></body></html>