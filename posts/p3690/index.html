<!DOCTYPE html><html><head><meta charSet="utf-8"/><meta name="viewport" content="width=device-width"/><meta name="twitter:card" content="summary_large_image"/><meta name="twitter:site" content="@site"/><meta name="twitter:creator" content="@keisukesiratori"/><meta property="og:site_name" content="Edelstein"/><title>Rust – Bevyでノベルゲームを作る 文字の表示</title><meta name="robots" content="index,follow"/><meta name="description" content="Rust – Bevyでノベルゲームを作る 文字の表示"/><meta property="og:title" content="Rust – Bevyでノベルゲームを作る 文字の表示"/><meta property="og:description" content="Rust – Bevyでノベルゲームを作る 文字の表示"/><meta property="og:url" content="http:localhost:3000/posts/p3690"/><meta property="og:type" content="website"/><meta property="og:image" content="https://locahost:3000/undefined"/><meta property="og:image:alt" content="Rust – Bevyでノベルゲームを作る 文字の表示"/><meta property="og:image:width" content="1200"/><meta property="og:image:height" content="700"/><meta name="next-head-count" content="17"/><link rel="preload" href="/_next/static/css/df6bb53438996960.css" as="style"/><link rel="stylesheet" href="/_next/static/css/df6bb53438996960.css" data-n-g=""/><noscript data-n-css=""></noscript><script defer="" nomodule="" src="/_next/static/chunks/polyfills-c67a75d1b6f99dc8.js"></script><script src="/_next/static/chunks/webpack-8fa1640cc84ba8fe.js" defer=""></script><script src="/_next/static/chunks/framework-7751730b10fa0f74.js" defer=""></script><script src="/_next/static/chunks/main-480c748fb908b436.js" defer=""></script><script src="/_next/static/chunks/pages/_app-5a840d570c522cf0.js" defer=""></script><script src="/_next/static/chunks/7-a9ae6bf2d6049209.js" defer=""></script><script src="/_next/static/chunks/pages/posts/%5Bslug%5D-31ed6b5e8c78747a.js" defer=""></script><script src="/_next/static/yBUsDMTrBp_-CsKJGHzWh/_buildManifest.js" defer=""></script><script src="/_next/static/yBUsDMTrBp_-CsKJGHzWh/_ssgManifest.js" defer=""></script></head><body><div id="__next"><div class="flex flex-col min-h-screen bg-zinc-800"><header class="sticky top-0 border-b border-zinc-400 z-10 bg-zinc-900 text-slate-400"><div class="max-w-4xl mx-auto flex justify-between items-center h-12"><a href="/">Home</a><a target="_blank" href="https://github.com/jirentaicho">Github</a><a target="_blank" href="https://zenn.dev/misaka">Zenn</a></div></header><main class="flex-1 max-w-4xl w-full mx-auto"><div class="prose prose-lg max-w-none text-emerald-400"><h1 class="mt-12">Rust – Bevyでノベルゲームを作る 文字の表示</h1><span>2022.09.10</span><div class="space-x-2"><span><a class="text-emerald-300" href="/categories/Rust/">Rust</a></span></div></div></main><footer class="bg-zinc-900 text-slate-400"><div class="max-w-4xl w-full mx-auto h-24 flex items-center justify-center"><div>© volkruss.com / Edelstein</div></div></footer></div></div><script id="__NEXT_DATA__" type="application/json">{"props":{"pageProps":{"frontMatter":{"title":"Rust – Bevyでノベルゲームを作る 文字の表示","date":"2022.09.10","description":"Rust – Bevyでノベルゲームを作る 文字の表示","categories":["Rust"]},"content":"\u003cp\u003e今回もBevyに関する記事です。前回はBevyを触ってみてどんな感じで動くのかを確認しました。\u003c/p\u003e\n\u003cp\u003e\u003ca href=\"/posts/p3555\"\u003eリンク\u003c/a\u003e\u003c/p\u003e\n\u003cp\u003e以前、TypeScriptとC#(WPF)でノベルゲームとノベルゲームメーカーを作りました\u003c/p\u003e\n\u003cp\u003e\u003ca href=\"/posts/p120\"\u003eリンク\u003c/a\u003e\u003c/p\u003e\n\u003cp\u003e今回はもう少し簡単なノベルゲームをBevyで作成していきます。\u003c/p\u003e\n\u003ch1\u003eテキストを表示する\u003c/h1\u003e\n\u003cp\u003eプロジェクトを作成して、最小単位のBevyアプリのコードを定義します。\u003c/p\u003e\n\u003cdiv class=\"remark-highlight\"\u003e\u003cpre class=\"language-python\"\u003e\u003ccode class=\"language-python\"\u003euse bevy\u003cspan class=\"token punctuation\"\u003e:\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e:\u003c/span\u003eprelude\u003cspan class=\"token punctuation\"\u003e:\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e:\u003c/span\u003e\u003cspan class=\"token operator\"\u003e*\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e;\u003c/span\u003e\n\nfn main\u003cspan class=\"token punctuation\"\u003e(\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e)\u003c/span\u003e \u003cspan class=\"token punctuation\"\u003e{\u003c/span\u003e\n    App\u003cspan class=\"token punctuation\"\u003e:\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e:\u003c/span\u003enew\u003cspan class=\"token punctuation\"\u003e(\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e)\u003c/span\u003e\n    \u003cspan class=\"token punctuation\"\u003e.\u003c/span\u003erun\u003cspan class=\"token punctuation\"\u003e(\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e)\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e;\u003c/span\u003e\n\u003cspan class=\"token punctuation\"\u003e}\u003c/span\u003e\n\u003c/code\u003e\u003c/pre\u003e\u003c/div\u003e\n\u003cp\u003eここにテキストの表示処理を実装していきます。\u003c/p\u003e\n\u003ch3\u003eフォントの用意\u003c/h3\u003e\n\u003cp\u003eフォントを用意するですが、サンプルにあるフォントを利用します\u003c/p\u003e\n\u003cp\u003ehttps://github.com/bevyengine/bevy/tree/main/assets/fonts\u003c/p\u003e\n\u003cp\u003eこの「FiraMono-Medium.ttf」をassets/fontsフォルダに格納しておきます。\u003c/p\u003e\n\u003ch3\u003eテキストの生成\u003c/h3\u003e\n\u003cp\u003e以下のコードを記載します\u003c/p\u003e\n\u003cdiv class=\"remark-highlight\"\u003e\u003cpre class=\"language-python\"\u003e\u003ccode class=\"language-python\"\u003euse bevy\u003cspan class=\"token punctuation\"\u003e:\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e:\u003c/span\u003eprelude\u003cspan class=\"token punctuation\"\u003e:\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e:\u003c/span\u003e\u003cspan class=\"token operator\"\u003e*\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e;\u003c/span\u003e\n\nfn main\u003cspan class=\"token punctuation\"\u003e(\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e)\u003c/span\u003e \u003cspan class=\"token punctuation\"\u003e{\u003c/span\u003e\n    App\u003cspan class=\"token punctuation\"\u003e:\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e:\u003c/span\u003enew\u003cspan class=\"token punctuation\"\u003e(\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e)\u003c/span\u003e\n    \u003cspan class=\"token punctuation\"\u003e.\u003c/span\u003eadd_plugins\u003cspan class=\"token punctuation\"\u003e(\u003c/span\u003eDefaultPlugins\u003cspan class=\"token punctuation\"\u003e)\u003c/span\u003e\n    \u003cspan class=\"token punctuation\"\u003e.\u003c/span\u003eadd_startup_system\u003cspan class=\"token punctuation\"\u003e(\u003c/span\u003esetup\u003cspan class=\"token punctuation\"\u003e)\u003c/span\u003e\n    \u003cspan class=\"token punctuation\"\u003e.\u003c/span\u003erun\u003cspan class=\"token punctuation\"\u003e(\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e)\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e;\u003c/span\u003e\n\u003cspan class=\"token punctuation\"\u003e}\u003c/span\u003e\n\n\n\u003cspan class=\"token operator\"\u003e//\u003c/span\u003e Systemは関数で定義する\n\u003cspan class=\"token operator\"\u003e//\u003c/span\u003e 引数として受け取れる特別なパラメータ\n\u003cspan class=\"token operator\"\u003e//\u003c/span\u003e   \u003cspan class=\"token operator\"\u003e-\u003c/span\u003e Res ResMut\n\u003cspan class=\"token operator\"\u003e//\u003c/span\u003e   \u003cspan class=\"token operator\"\u003e-\u003c/span\u003e Query\n\u003cspan class=\"token operator\"\u003e//\u003c/span\u003e   \u003cspan class=\"token operator\"\u003e-\u003c/span\u003e Commands\n\u003cspan class=\"token operator\"\u003e//\u003c/span\u003e   \u003cspan class=\"token operator\"\u003e-\u003c/span\u003e EventWriter EventReader\nfn setup\u003cspan class=\"token punctuation\"\u003e(\u003c/span\u003e\n    mut command\u003cspan class=\"token punctuation\"\u003e:\u003c/span\u003e Commands\u003cspan class=\"token punctuation\"\u003e,\u003c/span\u003e\n    asset_server\u003cspan class=\"token punctuation\"\u003e:\u003c/span\u003e Res\u003cspan class=\"token operator\"\u003e\u0026#x3C;\u003c/span\u003eAssetServer\u003cspan class=\"token operator\"\u003e\u003e\u003c/span\u003e\n\u003cspan class=\"token punctuation\"\u003e)\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e{\u003c/span\u003e\n    \u003cspan class=\"token operator\"\u003e//\u003c/span\u003e フォントの取得\n    let font \u003cspan class=\"token operator\"\u003e=\u003c/span\u003e asset_server\u003cspan class=\"token punctuation\"\u003e.\u003c/span\u003eload\u003cspan class=\"token punctuation\"\u003e(\u003c/span\u003e\u003cspan class=\"token string\"\u003e\"fonts/FiraMono-Medium.ttf\"\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e)\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e;\u003c/span\u003e\n    \u003cspan class=\"token operator\"\u003e//\u003c/span\u003e カメラの生成\n    command\u003cspan class=\"token punctuation\"\u003e.\u003c/span\u003espawn_bundle\u003cspan class=\"token punctuation\"\u003e(\u003c/span\u003eCamera2dBundle\u003cspan class=\"token punctuation\"\u003e:\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e:\u003c/span\u003edefault\u003cspan class=\"token punctuation\"\u003e(\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e)\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e)\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e;\u003c/span\u003e\n    \u003cspan class=\"token operator\"\u003e//\u003c/span\u003e テキストの生成\n    command\u003cspan class=\"token punctuation\"\u003e.\u003c/span\u003espawn_bundle\u003cspan class=\"token punctuation\"\u003e(\u003c/span\u003eTextBundle\u003cspan class=\"token punctuation\"\u003e:\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e:\u003c/span\u003efrom_section\u003cspan class=\"token punctuation\"\u003e(\u003c/span\u003e\n        \u003cspan class=\"token string\"\u003e\"Hello Wolrd\"\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e,\u003c/span\u003e\n        TextStyle \u003cspan class=\"token punctuation\"\u003e{\u003c/span\u003e\n            font\u003cspan class=\"token punctuation\"\u003e:\u003c/span\u003e font\u003cspan class=\"token punctuation\"\u003e.\u003c/span\u003eclone\u003cspan class=\"token punctuation\"\u003e(\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e)\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e,\u003c/span\u003e \u003cspan class=\"token operator\"\u003e//\u003c/span\u003e取得したフォント\n            font_size\u003cspan class=\"token punctuation\"\u003e:\u003c/span\u003e \u003cspan class=\"token number\"\u003e60.0\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e,\u003c/span\u003e\n            color\u003cspan class=\"token punctuation\"\u003e:\u003c/span\u003e Color\u003cspan class=\"token punctuation\"\u003e:\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e:\u003c/span\u003ergb\u003cspan class=\"token punctuation\"\u003e(\u003c/span\u003e\u003cspan class=\"token number\"\u003e0.9\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e,\u003c/span\u003e \u003cspan class=\"token number\"\u003e0.9\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e,\u003c/span\u003e \u003cspan class=\"token number\"\u003e0.9\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e)\u003c/span\u003e\n        \u003cspan class=\"token punctuation\"\u003e}\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e)\u003c/span\u003e\n        \u003cspan class=\"token punctuation\"\u003e.\u003c/span\u003ewith_style\u003cspan class=\"token punctuation\"\u003e(\u003c/span\u003eStyle\u003cspan class=\"token punctuation\"\u003e{\u003c/span\u003e\n            margin\u003cspan class=\"token punctuation\"\u003e:\u003c/span\u003e UiRect\u003cspan class=\"token punctuation\"\u003e:\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e:\u003c/span\u003e\u003cspan class=\"token builtin\"\u003eall\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e(\u003c/span\u003eVal\u003cspan class=\"token punctuation\"\u003e:\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e:\u003c/span\u003ePx\u003cspan class=\"token punctuation\"\u003e(\u003c/span\u003e\u003cspan class=\"token number\"\u003e50.0\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e)\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e)\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e,\u003c/span\u003e \u003cspan class=\"token operator\"\u003e//\u003c/span\u003e ウインドウの左下を起点に\u003cspan class=\"token punctuation\"\u003e(\u003c/span\u003e\u003cspan class=\"token number\"\u003e50.0\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e)\u003c/span\u003eのマージンを取る\n            \u003cspan class=\"token punctuation\"\u003e.\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e.\u003c/span\u003edefault\u003cspan class=\"token punctuation\"\u003e(\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e)\u003c/span\u003e\n        \u003cspan class=\"token punctuation\"\u003e}\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e)\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e,\u003c/span\u003e\n    \u003cspan class=\"token punctuation\"\u003e)\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e;\u003c/span\u003e\n\u003cspan class=\"token punctuation\"\u003e}\u003c/span\u003e\n\u003c/code\u003e\u003c/pre\u003e\u003c/div\u003e\n\u003cp\u003e実行すると以下のようにBevy | Rustという文字が表示されます。\u003c/p\u003e\n\u003cp\u003e\u003cimg src=\"/3690/1.png\" alt=\"画像\"\u003e\u003c/p\u003e\n\u003cp\u003eテキストの表示にTextBundleを利用しました。\u003c/p\u003e\n\u003ch2\u003e用語と機能\u003c/h2\u003e\n\u003ch3\u003eSystem\u003c/h3\u003e\n\u003cp\u003e自分で関数を定義してゲームロジックを実装します。この時に引数としてコメントに書いたような特別なパラメータを受け取ることができます。\u003c/p\u003e\n\u003cp\u003eアプリビルダーを経由してBevyに登録します\u003c/p\u003e\n\u003ch3\u003eCommands\u003c/h3\u003e\n\u003cp\u003eエンティティの生成や削除、またエンティティに対してコンポーネントの追加削除、リソース管理を行います。\u003c/p\u003e\n\u003ch3\u003eRes\u003c/h3\u003e\n\u003cp\u003eリソースの共有借用。ファイルからアセットを読み込むにはAssetServerリソースを利用します\u003c/p\u003e\n\u003ch3\u003eエンティティ\u003c/h3\u003e\n\u003cp\u003eゲームの内のオブジェクトを表します。シンプルな識別子くらいのものにしか持っていません。spawnを利用して生成します\u003c/p\u003e\n\u003ch3\u003eコンポーネント\u003c/h3\u003e\n\u003cp\u003eエンティティに関連するデータ。   #[derive(Component)]を利用して、構造体またはenumを定義して利用します\u003c/p\u003e\n\u003ch2\u003eシリーズ記事\u003c/h2\u003e\n\u003cp\u003e◆Rust – Bevyでノベルゲームを作る 文字の表示\u003c/p\u003e\n\u003cp\u003e\u003ca href=\"/posts/p3690\"\u003eリンク\u003c/a\u003e\u003c/p\u003e\n\u003cp\u003e◆Rust – Bevyでノベルゲームを作る 枠の表示\u003c/p\u003e\n\u003cp\u003e\u003ca href=\"/posts/p3702\"\u003eリンク\u003c/a\u003e\u003c/p\u003e\n\u003cp\u003e◆Rust – Bevyでノベルゲームを作る 次の文字を表示\u003c/p\u003e\n\u003cp\u003e\u003ca href=\"/posts/p3716\"\u003eリンク\u003c/a\u003e\u003c/p\u003e\n\u003cp\u003e◆Rust – Bevyでノベルゲームを作る キャラクターを表示する\u003c/p\u003e\n\u003cp\u003e\u003ca href=\"/posts/p3731\"\u003eリンク\u003c/a\u003e\u003c/p\u003e","slug":"p3690"},"__N_SSG":true},"page":"/posts/[slug]","query":{"slug":"p3690"},"buildId":"yBUsDMTrBp_-CsKJGHzWh","isFallback":false,"gsp":true,"scriptLoader":[]}</script></body></html>