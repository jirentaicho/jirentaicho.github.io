<!DOCTYPE html><html><head><meta charSet="utf-8"/><meta name="viewport" content="width=device-width"/><meta name="twitter:card" content="summary_large_image"/><meta name="twitter:site" content="@site"/><meta name="twitter:creator" content="@keisukesiratori"/><meta property="og:site_name" content="Edelstein"/><title>Rust – Bevyでノベルゲームを作る 枠の表示</title><meta name="robots" content="index,follow"/><meta name="description" content="Rust – Bevyでノベルゲームを作る 枠の表示"/><meta property="og:title" content="Rust – Bevyでノベルゲームを作る 枠の表示"/><meta property="og:description" content="Rust – Bevyでノベルゲームを作る 枠の表示"/><meta property="og:url" content="http:localhost:3000/posts/p3702"/><meta property="og:type" content="website"/><meta property="og:image" content="https://locahost:3000/undefined"/><meta property="og:image:alt" content="Rust – Bevyでノベルゲームを作る 枠の表示"/><meta property="og:image:width" content="1200"/><meta property="og:image:height" content="700"/><meta name="next-head-count" content="17"/><link rel="preload" href="/_next/static/css/381274c492410f8e.css" as="style"/><link rel="stylesheet" href="/_next/static/css/381274c492410f8e.css" data-n-g=""/><noscript data-n-css=""></noscript><script defer="" nomodule="" src="/_next/static/chunks/polyfills-c67a75d1b6f99dc8.js"></script><script src="/_next/static/chunks/webpack-8fa1640cc84ba8fe.js" defer=""></script><script src="/_next/static/chunks/framework-7751730b10fa0f74.js" defer=""></script><script src="/_next/static/chunks/main-480c748fb908b436.js" defer=""></script><script src="/_next/static/chunks/pages/_app-5a840d570c522cf0.js" defer=""></script><script src="/_next/static/chunks/7-a9ae6bf2d6049209.js" defer=""></script><script src="/_next/static/chunks/pages/posts/%5Bslug%5D-31ed6b5e8c78747a.js" defer=""></script><script src="/_next/static/d4wXshO8vCMxs30HEcSiK/_buildManifest.js" defer=""></script><script src="/_next/static/d4wXshO8vCMxs30HEcSiK/_ssgManifest.js" defer=""></script></head><body><div id="__next"><div class="flex flex-col min-h-screen bg-zinc-800"><header class="sticky top-0 border-b border-zinc-400 z-10 bg-zinc-900 text-slate-400"><div class="max-w-4xl mx-auto flex justify-between items-center h-12"><a href="/">Home</a><a target="_blank" href="https://github.com/jirentaicho">Github</a><a target="_blank" href="https://zenn.dev/misaka">Zenn</a></div></header><main class="flex-1 max-w-4xl w-full mx-auto"><div class="prose prose-lg max-w-none text-emerald-400"><h1 class="mt-12">Rust – Bevyでノベルゲームを作る 枠の表示</h1><span>2022.09.10</span><div class="space-x-2"><span><a class="text-emerald-300" href="/categories/Rust/">Rust</a></span></div></div></main><footer class="bg-zinc-900 text-slate-400"><div class="max-w-4xl w-full mx-auto h-24 flex items-center justify-center"><div>© volkruss.com / Edelstein</div></div></footer></div></div><script id="__NEXT_DATA__" type="application/json">{"props":{"pageProps":{"frontMatter":{"title":"Rust – Bevyでノベルゲームを作る 枠の表示","date":"2022.09.10","description":"Rust – Bevyでノベルゲームを作る 枠の表示","categories":["Rust"]},"content":"\u003cp\u003e前回の続きです\u003c/p\u003e\n\u003cp\u003e前回は単純な文字列を表示することができましたので、今回は枠を作ってそこに文字列を表示させるようにします。\n黒い枠を100%100%で表示してみます。前回のテキストを表示の手前に実装を書きます。\u003c/p\u003e\n\u003cdiv class=\"remark-highlight\"\u003e\u003cpre class=\"language-rs\"\u003e\u003ccode class=\"language-rs\"\u003euse bevy::prelude::*;\n\nfn main() {\n    App::new()\n    .add_plugins(DefaultPlugins)\n    .add_startup_system(setup)\n    .run();\n}\n\nfn setup(\n    mut command: Commands,\n    asset_server: Res\u0026#x26;lt;AssetServer\u0026#x26;gt;\n){\n    // フォントの取得\n    let font = asset_server.load(\u0026#x26;quot;fonts/FiraMono-Medium.ttf\u0026#x26;quot;);\n    // カメラの生成\n    command.spawn_bundle(Camera2dBundle::default());\n    // 枠の生成\n    command.spawn_bundle(NodeBundle{\n                style: Style {\n                    size: Size::new(Val::Percent(100.0), Val::Percent(100.0)),\n                    margin: UiRect::all(Val::Px(50.0)),\n                    ..default()\n                },\n                color: Color::BLACK.into(),\n                ..default()\n    });\n    // テキストの生成\n    command.spawn_bundle(TextBundle::from_section(\n        \u0026#x26;quot;Bevy | Rust\u0026#x26;quot;,\n        TextStyle {\n            font: font.clone(), //取得したフォント\n            font_size: 60.0,\n            color: Color::rgb(0.9, 0.9, 0.9)\n        })\n        .with_style(Style{\n            margin: UiRect::all(Val::Px(50.0)), // ウインドウの左下を起点に(50.0)のマージンを取る\n            ..default()\n        }),\n    );\n}\u003c/code\u003e\u003c/pre\u003e\u003c/div\u003e\n\u003cp\u003e\u003cimg src=\"/3702/1.png\" alt=\"画像\"\u003e\u003c/p\u003e\n\u003cp\u003e100%になっているのは高さだけで、横幅は100%になっていません。\nと、コードを書きつつ、実行結果を見て思ったのはこれはHTMLとCSSにソックリだということです。今はNodeBundleという要素の横に、TextBundleという要素が横並びになっているような状態ではないでしょうか？\n試しにTextBundleを消して実行すると、マージンを除けばだいたい100%で表示されました。\u003c/p\u003e\n\u003cp\u003e\u003cimg src=\"/3702/2.png\" alt=\"画像\"\u003e\u003c/p\u003e\n\u003cp\u003eHTMLとCSSに似ていると書きましたが、これはWasmでWebAssemblyとして利用できるので当然だと思います。実際にStyleはcssのflexboxシステムを利用していると書いてありました。\n枠に対してテキストを子要素として登録することで、横並びの問題は解決できそうです。とりあえずテキストの位置とかは気にしないでやってみます。\u003c/p\u003e\n\u003cdiv class=\"remark-highlight\"\u003e\u003cpre class=\"language-Python\"\u003e\u003ccode class=\"language-Python\"\u003euse bevy::prelude::*;\n\nfn main() {\n    App::new()\n    .add_plugins(DefaultPlugins)\n    .add_startup_system(setup)\n    .run();\n}\n\nfn setup(\n    mut command: Commands,\n    asset_server: Res\u0026#x26;lt;AssetServer\u0026#x26;gt;\n){\n    // フォントの取得\n    let font = asset_server.load(\u0026#x26;quot;fonts/FiraMono-Medium.ttf\u0026#x26;quot;);\n    // カメラの生成\n    command.spawn_bundle(Camera2dBundle::default());\n    // 枠の生成\n    command.spawn_bundle(NodeBundle{\n                style: Style {\n                    size: Size::new(Val::Percent(100.0), Val::Percent(100.0)),\n                    margin: UiRect::all(Val::Px(50.0)),\n                    ..default()\n                },\n                color: Color::BLACK.into(),\n                ..default()\n    })//;\n    // テキストを子要素にする\n    .with_children(|parent| {\n            // クロージャでparentに対してspawnするように記載\n            parent.spawn_bundle(TextBundle::from_section(\n                \u0026#x26;quot;Bevy | Rust\u0026#x26;quot;,\n                TextStyle {\n                    font: font.clone(), //取得したフォント\n                    font_size: 60.0,\n                    color: Color::rgb(0.9, 0.9, 0.9)\n                })\n                .with_style(Style{\n                    margin: UiRect::all(Val::Px(50.0)), // ウインドウの左下を起点に(50.0)のマージンを取る\n                    ..default()\n                }),\n            );\n\n        }\n    );\n}\u003c/code\u003e\u003c/pre\u003e\u003c/div\u003e\n\u003cp\u003e\u003cimg src=\"/3702/3.png\" alt=\"画像\"\u003e\u003c/p\u003e\n\u003cp\u003eクロージャを利用してNodeBundleに対してTextBundleを追加しているようなイメージですね。\n少しスタイルを変えてみます。\u003c/p\u003e\n\u003cdiv class=\"remark-highlight\"\u003e\u003cpre class=\"language-rs\"\u003e\u003ccode class=\"language-rs\"\u003euse bevy::prelude::*;\n\nfn main() {\n    App::new()\n    .add_plugins(DefaultPlugins)\n    .add_startup_system(setup)\n    .run();\n}\n\nfn setup(\n    mut command: Commands,\n    asset_server: Res\u0026#x26;lt;AssetServer\u0026#x26;gt;\n){\n    // フォントの取得\n    let font = asset_server.load(\u0026#x26;quot;fonts/FiraMono-Medium.ttf\u0026#x26;quot;);\n    // カメラの生成\n    command.spawn_bundle(Camera2dBundle::default());\n    // 枠の生成\n    command.spawn_bundle(NodeBundle{\n                style: Style {\n                    //高さは50%に指定\n                    size: Size::new(Val::Percent(100.0), Val::Percent(50.0)),\n                    //marginは0にしておく\n                    margin: UiRect::all(Val::Px(0.0)),\n                    // 追加位置を指定する（感覚cssと同じ)\n                    align_items: AlignItems::FlexStart,\n                    ..default()\n                },\n                color: Color::BLACK.into(),\n                ..default()\n    })\n    .with_children(|parent| {\n            parent.spawn_bundle(TextBundle::from_section(\n                \u0026#x26;quot;Bevy | Rust\u0026#x26;quot;,\n                TextStyle {\n                    font: font.clone(),\n                    font_size: 60.0,\n                    color: Color::rgb(0.9, 0.9, 0.9)\n                })\n                // 位置は親要素に依存させるため記載除去\n                /*\n                .with_style(Style{\n                    margin: UiRect::all(Val::Px(50.0)), \n                    ..default()\n                }),\n                */\n            );\n\n        }\n    );\n}\u003c/code\u003e\u003c/pre\u003e\u003c/div\u003e\n\u003cp\u003e\u003cimg src=\"/3702/4.png\" alt=\"画像\"\u003e\u003c/p\u003e\n\u003cp\u003eというわけでFlexEndにすると\u003c/p\u003e\n\u003cdiv class=\"remark-highlight\"\u003e\u003cpre class=\"language-rs\"\u003e\u003ccode class=\"language-rs\"\u003e// 追加位置を指定する（感覚cssと同じ)\nalign_items: AlignItems::FlexEnd,\u003c/code\u003e\u003c/pre\u003e\u003c/div\u003e\n\u003cp\u003e\u003cimg src=\"/3702/5.png\" alt=\"画像\"\u003e\u003c/p\u003e\n\u003cp\u003eイイ感じになりました。これでテキストに関しては親要素の左上起点にして表示されています。\nこの親要素と子要素という考え方は、UIとか作る際には重要になりそうです。\u003c/p\u003e\n\u003ch2\u003eシリーズ記事\u003c/h2\u003e\n\u003cp\u003e◆Rust – Bevyでノベルゲームを作る 文字の表示\u003c/p\u003e\n\u003cp\u003e\u003ca href=\"/posts/p3690\"\u003eリンク\u003c/a\u003e\u003c/p\u003e\n\u003cp\u003e◆Rust – Bevyでノベルゲームを作る 枠の表示\u003c/p\u003e\n\u003cp\u003e\u003ca href=\"/posts/p3702\"\u003eリンク\u003c/a\u003e\u003c/p\u003e\n\u003cp\u003e◆Rust – Bevyでノベルゲームを作る 次の文字を表示\u003c/p\u003e\n\u003cp\u003e\u003ca href=\"/posts/p3716\"\u003eリンク\u003c/a\u003e\u003c/p\u003e\n\u003cp\u003e◆Rust – Bevyでノベルゲームを作る キャラクターを表示する\u003c/p\u003e\n\u003cp\u003e\u003ca href=\"/posts/p3731\"\u003eリンク\u003c/a\u003e\u003c/p\u003e","slug":"p3702"},"__N_SSG":true},"page":"/posts/[slug]","query":{"slug":"p3702"},"buildId":"d4wXshO8vCMxs30HEcSiK","isFallback":false,"gsp":true,"scriptLoader":[]}</script></body></html>